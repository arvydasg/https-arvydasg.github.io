<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="Ways to create a blog with Emacs">
<link rel="alternate"
      type="application/rss+xml"
      href="https://arvydasg.github.io/rss.xml"
      title="RSS feed for https://arvydasg.github.io/">
<title>Create a Blog with Emacs</title>
<meta name="author" content="Arvydas Gasparavicius">
<meta name="referrer" content="no-referrer">
<meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1">
<link href= "static/style.css" rel="stylesheet" type="text/css" />
<script src="static/lightbox.js"></script>
<script src="static/auto-render.min.js"></script>
<link rel="icon" href="static/ag.ico"></head>
<body>
<div id="preamble" class="status"><div class="header">
  <a href="https://arvydasg.github.io/">Arvydas Scratchpad on the Internet</a>
  <div class="sitelinks">
    <a href="https://github.com/arvydasg">Github</a> | <a href="https://arvydasg.github.io/projects.html">Projects</a> | <a href="https://arvydasg.github.io/uses.html">Uses</a> | <a href="https://arvydasg.github.io/about.html">About</a>
  </div>
</div></div>
<div id="content">
<div class="post-date">21 Jan 2023</div><h1 class="post-title"><a href="https://arvydasg.github.io/2023-01-21-create-emacs-blog.html">Create a Blog with Emacs</a></h1>

<div id="outline-container-orgc0ad2a0" class="outline-2">
<h2 id="orgc0ad2a0">Intro</h2>
<div class="outline-text-2" id="text-orgc0ad2a0">
<p>
If you are using Emacs and org mode as much as me, you must have come up to
<code>org-publish</code> feature that allows you to convert org files to html.
</p>

<p>
When you have a lot of org files - means you can have a lot of html
files. When you have a lot of html files - you can have your own
static website ;)
</p>
</div>
</div>

<div id="outline-container-org957c27b" class="outline-2">
<h2 id="org957c27b">Create Emacs blog the "System Crafters" way</h2>
<div class="outline-text-2" id="text-org957c27b">
<p>
Best description in a video format is <a href="https://www.youtube.com/watch?v=AfkrzFodoNw&amp;t=1612s&amp;ab_channel=SystemCrafters">here</a>. To later publish it
automaticall,y video <a href="https://www.youtube.com/watch?v=za99DwdZEyg&amp;t=996s&amp;ab_channel=SystemCrafters">here</a>.
</p>
</div>
<div id="outline-container-org4ab8f8f" class="outline-3">
<h3 id="org4ab8f8f">Choose a directory</h3>
<div class="outline-text-3" id="text-org4ab8f8f">
<p>
You will place your org files inside content/ directory.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">/home/arvydas/Dropbox/src/sites/my-org-site/content/
</pre>
</div>
</div>
</div>

<div id="outline-container-org37ab428" class="outline-3">
<h3 id="org37ab428">Creating the build script</h3>
<div class="outline-text-3" id="text-org37ab428">
</div>
<div id="outline-container-orgd3962a5" class="outline-4">
<h4 id="orgd3962a5">build-site.el</h4>
<div class="outline-text-4" id="text-orgd3962a5">
<p>
Inside of this directory:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">/home/arvydas/Dropbox/src/sites/my-org-site/
</pre>
</div>

<p>
Create a file called <code>build-site.el</code> with this inside of it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #928374;">;; </span><span style="color: #928374;">Load the publishing system</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">require</span> '<span style="color: #d3869b;">ox-publish</span><span style="color: #fe8019;">)</span>

<span style="color: #fe8019;">(</span>message <span style="color: #b8bb26;">"Build complete!"</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Define the publishing project</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> org-publish-project-alist
      <span style="color: #cc241d;">(</span>list
       <span style="color: #b8bb26;">(</span>list <span style="color: #b8bb26;">"my-org-site"</span>
             <span style="color: #fe8019;">:recursive</span> t
             <span style="color: #fe8019;">:base-directory</span> <span style="color: #b8bb26;">"./content"</span>
             <span style="color: #fe8019;">:publishing-directory</span> <span style="color: #b8bb26;">"./public"</span>
             <span style="color: #fe8019;">:publishing-function</span> 'org-html-publish-to-html<span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Generate the site output</span>
<span style="color: #fe8019;">(</span>org-publish-all t<span style="color: #fe8019;">)</span>
</pre>
</div>

<p>
This configures the <i>org-publish-project-alist</i> variable to define a
publishing project for our site. Read the documentation of this
variable using M-x describe-variable for a lot more information!
</p>
</div>
</div>

<div id="outline-container-orga1972b9" class="outline-4">
<h4 id="orga1972b9">build.sh</h4>
<div class="outline-text-4" id="text-orga1972b9">
<p>
We also need a shell script that can run our Emacs Lisp script. We'll call that build.sh:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">#!/bin/sh
emacs -Q --script build-site.el
</pre>
</div>

<p>
Don't forget to use <code>chmod +x build.sh</code> to make the script executable!
</p>

<p>
NOTE: If you're on Windows, you can create a <code>build.cmd</code> file that
invokes Emacs the same way.
</p>

<p>
The -Q parameter prevents Emacs from loading your own Emacs
configuration which will help ensure that this same script can be
executed cleanly on other machines once we get ready to start
publishing this site.
</p>

<p>
Create one org file, in the content dir, run the shell script, see the
html in public folder, open it in the browser.
</p>
</div>
</div>
</div>

<div id="outline-container-orgca689c0" class="outline-3">
<h3 id="orgca689c0">Improving the HTML output</h3>
<div class="outline-text-3" id="text-orgca689c0">
<p>
There are a few things about the page we just looked at that I'd like
to change to make the output look a bit cleaner:
</p>

<ul class="org-ul">
<li>Section numbers</li>
<li>Author name</li>
<li>Publish timestamp</li>
<li>Validate link</li>
</ul>

<p>
Luckily the publish system is very customizable so I'll show you how
we can disable a few things in the project configuration to get a
better result.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #928374;">;; </span><span style="color: #928374;">Define the publishing project</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> org-publish-project-alist
      <span style="color: #cc241d;">(</span>list
       <span style="color: #b8bb26;">(</span>list <span style="color: #b8bb26;">"org-site:main"</span>
             <span style="color: #fe8019;">:recursive</span> t
             <span style="color: #fe8019;">:base-directory</span> <span style="color: #b8bb26;">"./content"</span>
             <span style="color: #fe8019;">:publishing-function</span> 'org-html-publish-to-html
             <span style="color: #fe8019;">:publishing-directory</span> <span style="color: #b8bb26;">"./public"</span>
             <span style="color: #fe8019;">:with-author</span> nil           <span style="color: #928374;">;; </span><span style="color: #928374;">Don't include author name</span>
             <span style="color: #fe8019;">:with-creator</span> t            <span style="color: #928374;">;; </span><span style="color: #928374;">Include Emacs and Org versions in footer</span>
             <span style="color: #fe8019;">:with-toc</span> t                <span style="color: #928374;">;; </span><span style="color: #928374;">Include a table of contents</span>
             <span style="color: #fe8019;">:section-numbers</span> nil       <span style="color: #928374;">;; </span><span style="color: #928374;">Don't include section numbers</span>
             <span style="color: #fe8019;">:time-stamp-file</span> nil<span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>    <span style="color: #928374;">;; </span><span style="color: #928374;">Don't include time stamp in file</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb59105c" class="outline-3">
<h3 id="orgb59105c">Improving the page styling</h3>
<div class="outline-text-3" id="text-orgb59105c">
<p>
At this point have a decent basic output for our website, but what if we want to make it look a little bit nicer?
</p>

<p>
By setting a few more variables, we can use a nice stylesheet to give our site a more polished look:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #928374;">;; </span><span style="color: #928374;">Customize the HTML output</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> org-html-validation-link nil            <span style="color: #928374;">;; </span><span style="color: #928374;">Don't show validation link</span>
      org-html-head-include-scripts nil       <span style="color: #928374;">;; </span><span style="color: #928374;">Use our own scripts</span>
      org-html-head-include-default-style nil <span style="color: #928374;">;; </span><span style="color: #928374;">Use our own styles</span>
      org-html-head <span style="color: #b8bb26;">"&lt;link rel=\"stylesheet\" href=\"simple.min.css\" /&gt;"</span> <span style="color: #928374;">;</span><span style="color: #928374;">place your own stylesheet in public folder</span>
      org-html-head <span style="color: #b8bb26;">"&lt;link rel=\"stylesheet\" href=\"https://cdn.simplecss.org/simple.min.css\" /&gt;"</span> <span style="color: #928374;">;</span><span style="color: #928374;">use cdn stylesheet</span>
      <span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge27f288" class="outline-3">
<h3 id="orge27f288">Generating pages with code blocks</h3>
<div class="outline-text-3" id="text-orge27f288">
<p>
So far we've been looking at a very simple example page that doesn't really have much on it. What happens when we try to generate a more elaborate Org file containing code blocks?
</p>

<p>
Let's try it out with another file, a version of my literate Emacs configuration called Emacs.org!
</p>

<p>
If you're generating a site that features code blocks like a coding blog or a literate Emacs configuration, you'll probably see an error like this when you generate the site:
</p>


<p>
Cannot fontify source block (htmlize.el &gt;= 1.34 required)
</p>

<p>
To resolve this issue, you will need to install the htmlize package from MELPA. We can automate the process of installing this package by adding the following snippet to our build-site.el file:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #928374;">;; </span><span style="color: #928374;">Set the package installation directory so that packages aren't stored in the</span>
<span style="color: #928374;">;; </span><span style="color: #928374;">~/.emacs.d/elpa path.</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">require</span> '<span style="color: #d3869b;">package</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> package-user-dir <span style="color: #cc241d;">(</span>expand-file-name <span style="color: #b8bb26;">"./.packages"</span><span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> package-archives '<span style="color: #cc241d;">(</span><span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"melpa"</span> . <span style="color: #b8bb26;">"https://melpa.org/packages/"</span><span style="color: #b8bb26;">)</span>
                         <span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"elpa"</span> . <span style="color: #b8bb26;">"https://elpa.gnu.org/packages/"</span><span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Initialize the package system</span>
<span style="color: #fe8019;">(</span>package-initialize<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">unless</span> package-archive-contents
  <span style="color: #cc241d;">(</span>package-refresh-contents<span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Install dependencies</span>
<span style="color: #fe8019;">(</span>package-install 'htmlize<span style="color: #fe8019;">)</span>
</pre>
</div>

<p>
In this snippet, we load Emacs' package manager and configure the package-user-dir to be a sub-directory of our project folder. This allows you to install packages for the script without mixing them up with the packages of your personal Emacs configuration!
</p>

<p>
The next thing we do is add MELPA to the package archive list and refresh the package archive so that htmlize can be found. Finally, we call package-install to install it!
</p>

<p>
In a future video I'll show you how to convert your Emacs color theme to a CSS file that you can use to colorize source blocks with exactly the same colors used in the theme!
</p>
</div>
</div>

<div id="outline-container-orgff92bdb" class="outline-3">
<h3 id="orgff92bdb">Linking between pages</h3>
<div class="outline-text-3" id="text-orgff92bdb">
<p>
One last thing I want to show you is how you can create links between
pages on your site. Let's open up index.org and create a link to the
Emacs.org file.
</p>

<p>
Inside index.org, we can press <code>C-c C-l (org-insert-link)</code>, enter the
path of the Org file we want to link to (./Emacs.org), press Enter,
then enter the text for the link ("My Emacs configuration").
</p>

<p>
When you generate the site again, you should be able to follow the
link between pages because Org's publishing system will convert the
link to the proper output extension.
</p>

<p>
It will also complain when a linked file can't be found!
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp">Debugger entered--Lisp error: <span style="color: #fe8019;">(</span><span style="color: #fabd2f;">user-error</span> <span style="color: #b8bb26;">"Unable to resolve link: \"Emacs2.org\""</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org68e9283" class="outline-3">
<h3 id="org68e9283">The final build script</h3>
<div class="outline-text-3" id="text-org68e9283">
<p>
Here is the final form of our <code>build-site.el</code> script:
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #928374;">;; </span><span style="color: #928374;">Set the package installation directory so that packages aren't stored in the</span>
<span style="color: #928374;">;; </span><span style="color: #928374;">~/.emacs.d/elpa path.</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">require</span> '<span style="color: #d3869b;">package</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> package-user-dir <span style="color: #cc241d;">(</span>expand-file-name <span style="color: #b8bb26;">"./.packages"</span><span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> package-archives '<span style="color: #cc241d;">(</span><span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"melpa"</span> . <span style="color: #b8bb26;">"https://melpa.org/packages/"</span><span style="color: #b8bb26;">)</span>
                         <span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"elpa"</span> . <span style="color: #b8bb26;">"https://elpa.gnu.org/packages/"</span><span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Initialize the package system</span>
<span style="color: #fe8019;">(</span>package-initialize<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">unless</span> package-archive-contents
  <span style="color: #cc241d;">(</span>package-refresh-contents<span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Install dependencies</span>
<span style="color: #fe8019;">(</span>package-install 'htmlize<span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Load the publishing system</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">require</span> '<span style="color: #d3869b;">ox-publish</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Customize the HTML output</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> org-html-validation-link nil            <span style="color: #928374;">;; </span><span style="color: #928374;">Don't show validation link</span>
      org-html-head-include-scripts nil       <span style="color: #928374;">;; </span><span style="color: #928374;">Use our own scripts</span>
      org-html-head-include-default-style nil <span style="color: #928374;">;; </span><span style="color: #928374;">Use our own styles</span>
      org-html-head <span style="color: #b8bb26;">"&lt;link rel=\"stylesheet\" href=\"https://cdn.simplecss.org/simple.min.css\" /&gt;"</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Define the publishing project</span>
<span style="color: #fe8019;">(</span><span style="color: #fb4934;">setq</span> org-publish-project-alist
      <span style="color: #cc241d;">(</span>list
       <span style="color: #b8bb26;">(</span>list <span style="color: #b8bb26;">"org-site:main"</span>
             <span style="color: #fe8019;">:recursive</span> t
             <span style="color: #fe8019;">:base-directory</span> <span style="color: #b8bb26;">"./content"</span>
             <span style="color: #fe8019;">:publishing-function</span> 'org-html-publish-to-html
             <span style="color: #fe8019;">:publishing-directory</span> <span style="color: #b8bb26;">"./public"</span>
             <span style="color: #fe8019;">:with-author</span> nil           <span style="color: #928374;">;; </span><span style="color: #928374;">Don't include author name</span>
             <span style="color: #fe8019;">:with-creator</span> t            <span style="color: #928374;">;; </span><span style="color: #928374;">Include Emacs and Org versions in footer</span>
             <span style="color: #fe8019;">:with-toc</span> t                <span style="color: #928374;">;; </span><span style="color: #928374;">Include a table of contents</span>
             <span style="color: #fe8019;">:section-numbers</span> nil       <span style="color: #928374;">;; </span><span style="color: #928374;">Don't include section numbers</span>
             <span style="color: #fe8019;">:time-stamp-file</span> nil<span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span><span style="color: #fe8019;">)</span>    <span style="color: #928374;">;; </span><span style="color: #928374;">Don't include time stamp in file</span>

<span style="color: #928374;">;; </span><span style="color: #928374;">Generate the site output</span>
<span style="color: #fe8019;">(</span>org-publish-all t<span style="color: #fe8019;">)</span>

<span style="color: #fe8019;">(</span>message <span style="color: #b8bb26;">"Build complete!"</span><span style="color: #fe8019;">)</span>

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6a01b17" class="outline-2">
<h2 id="org6a01b17">Create Emacs blog with "org-static-blog" package</h2>
<div class="outline-text-2" id="text-org6a01b17">
<p>
"<a href="https://github.com/bastibe/org-static-blog">org-static-blog</a>" is a package written by <a href="https://github.com/bastibe">Bastian Bechtold</a> is a static site
generator. I believe it started <a href="https://bastibe.de/2013-11-13-blogging-with-emacs.html">here</a>.
</p>

<p>
My current Emacs configuration for "<a href="https://github.com/arvydasg/.emacs.d/blob/master/recipes/org-static-blog.el">org-static-blog</a>" is here.
</p>

<p>
Install the plugin, you get all it's functions. They are
clearly documented within the plugin, it's super easy to read the
instructions and understand what it does. One command
<code>org-static-blog-create-new-post</code> creates new post, then
<code>org-static-blog-publish</code> converts all your .org files to html files in
your chosen location. You push them to github and that's all! Your
site is live.
</p>

<p>
I have just discovered it <span class="timestamp-wrapper"><span class="timestamp">[2023-01-21 Sat]</span></span>, but already like it.
Mainly because it is a simple program that I am able to wrap my head
around and I know it will remain simple and I will be able to use for
a long time in the future, it won't go anywhere. I can also make some
pull requests to it by adding Lithuanian language and some features.
It automatically generates archive file where all the posts are
stored, it also automatically generates tag's file and then in the
browser I can filter my posts.. It is easy to generate header and
footer. Yes, I like it more than the first method.
</p>

<p>
If you would like to add an image to your org file, try this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">#+attr_html: <span style="color: #fe8019;">:width</span> 1200px
#+ATTR_ORG: <span style="color: #fe8019;">:width</span> 600
<span style="color: #fe8019;">[</span><span style="color: #cc241d;">[</span>./static/images/org-static-blog.png<span style="color: #cc241d;">]</span><span style="color: #fe8019;">]</span>
</pre>
</div>


<figure id="org0a518ca">
<img src="./static/images/org-static-blog.png" alt="org-static-blog.png" width="1200px">

</figure>

<p>
lightbox.js that you can see in this page source helps with the lightbox effect that you get when clicking on
the image.
</p>
</div>
</div>

<div id="outline-container-org04de4a2" class="outline-2">
<h2 id="org04de4a2">Conclusion</h2>
<div class="outline-text-2" id="text-org04de4a2">
<p>
Now the only thing is left - I have to blog. :) I am thinking why
don't I whenever learning a new thing write such little summary about
it OR imagine that I am teaching someone this topic. "The best way to
learn it is to teach it" they say.
</p>
</div>
</div>
<div class="taglist"><a href="https://arvydasg.github.io/tags.html">Tags</a>: <a href="https://arvydasg.github.io/tag-emacs.html">Emacs</a> </div></div>
<div id="postamble" class="status"><div id="archive">
  <a href="./archive.html">Other posts</a>
</div></div>
</body>
</html>
