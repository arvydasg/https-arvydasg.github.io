<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="Learning about docker">
<link rel="alternate"
      type="application/rss+xml"
      href="https://arvydasg.github.io/rss.xml"
      title="RSS feed for https://arvydasg.github.io/">
<title>What is Docker?</title>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MC4ZQHP');</script>
<!-- End Google Tag Manager -->
<meta name="author" content="Arvydas Gasparavicius">
<meta name="referrer" content="no-referrer">
<meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1">
<link href= "static/style.css" rel="stylesheet" type="text/css" />
<script src="static/lightbox.js"></script>
<script src="static/auto-render.min.js"></script>
<link rel="icon" href="static/ag.ico"></head>
<body>
<div id="preamble" class="status">
<header>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC4ZQHP"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <div class="container">
        <div class="subcontainer">
            <nav class="nav">
                <a href="https://arvydasg.github.io/" class="nav-logo-wrapper">
                    <p class="nav-branding">Arvydas.dev</p>
                </a>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="https://arvydasg.github.io/tag-project.html" class="nav-link">Projects</a>
                    </li>
                    <li class="nav-item">
                        <a href="https://arvydasg.github.io/archive.html" class="nav-link">Blog</a>
                    </li>
                    <li class="nav-item">
                        <a href="https://arvydasg.github.io/tags.html" class="nav-link">Tags</a>
                    </li>
                    <li class="nav-item">
                        <a href="https://arvydas.dev/codeacademy/" class="nav-link">CodeAcademy</a>
                    </li>
                    <li class="nav-item">
                        <a href="https://arvydasg.github.io/freelancing.html" class="nav-link">Freelancing</a>
                    </li>
                    <li class="nav-item">
                        <a href="https://arvydasg.github.io/uses.html" class="nav-link">Uses</a>
                    </li>
                    <li class="nav-item">
                        <a href="https://arvydasg.github.io/about.html" class="nav-link">About</a>
                    </li>
                </ul>
                <div class="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </nav>
        </div>
    </div>
    </header>
    </div>
<div id="content">
<div class="post-date">31 Jan 2023</div><h1 class="post-title"><a href="https://arvydasg.github.io/2023-01-31-what-is-docker.html">What is Docker?</a></h1>
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org12f5e2c">History</a>
<ul>
<li><a href="#orgae65133">In the beginning</a></li>
<li><a href="#orga7440a6">Then came the virtual machines.</a></li>
<li><a href="#org350347d">Now what is the docker about?</a></li>
</ul>
</li>
<li><a href="#orgee45807">Docker intro</a>
<ul>
<li><a href="#org01ed7ed">Benefits of Docker</a></li>
<li><a href="#org2501d36">Why docker?</a></li>
</ul>
</li>
<li><a href="#org7b3100d">Deploying with Docker</a>
<ul>
<li><a href="#org375f916">Creating a platform to work on</a></li>
<li><a href="#org4c76512">Start pulling the images</a></li>
<li><a href="#orgee55a73">Run the image</a></li>
<li><a href="#org5dff1c3">List running containers</a></li>
<li><a href="#org6976ffc">Access the container</a></li>
<li><a href="#org2beabb7">Playing around</a></li>
<li><a href="#orgc89e290">Pull and run someone else's container</a></li>
<li><a href="#org87e4efc">Stopping the container</a></li>
<li><a href="#org5dc0678">See the metrics</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<p>
In almost every <a href="https://djangochat.com/">Django chat</a> podcast I hear about <a href="https://www.docker.com/">Docker</a>. For me it
seems like a DevOps'ish kind of tool, but it must be useful to learn
for a freelance Django developer like myself. It sounds like an
efficient and easy way to deploy Django applications.
</p>

<p>
So, let's learn about it.
</p>

<div id="outline-container-org12f5e2c" class="outline-2">
<h2 id="org12f5e2c">History</h2>
<div class="outline-text-2" id="text-org12f5e2c">
</div>
<div id="outline-container-orgae65133" class="outline-3">
<h3 id="orgae65133">In the beginning</h3>
<div class="outline-text-3" id="text-orgae65133">
<p>
If you wanted a server to store your applications onto, it had to be a
physical server in a data center. It could run ONE operating
system(OS). If you wanted another OS - you had to have another
physical center! Quite inefficient and most likely expensive.
</p>
</div>
</div>

<div id="outline-container-orga7440a6" class="outline-3">
<h3 id="orga7440a6">Then came the virtual machines.</h3>
<div class="outline-text-3" id="text-orga7440a6">
<ul class="org-ul">
<li>you would have a server hardware</li>
<li>then on the server hardware you install a hypervisor(vmware esxi)</li>
<li>inside this hypervisor you then create as many virtual machines as
you like, assigning CPU, ram, storage by yourself. Can increase all
of these in the future if you need to.</li>
</ul>

<p>
Now you have one physical server and many virtual machines on it.
Already way more efficient than the first option.
</p>
</div>
</div>

<div id="outline-container-org350347d" class="outline-3">
<h3 id="org350347d">Now what is the docker about?</h3>
<div class="outline-text-3" id="text-org350347d">
<p>
You still have the hardware, but on top of that you install one OS.
Ubuntu for example.
</p>

<p>
Now you install docker as any other application. It will run as
daemon. Docker will virtualize portions of our operation system. In
this case - Ubuntu to create <code>containers</code>. These containers also can run
a different OS's.
</p>

<ul class="org-ul">
<li>own OS</li>
<li>own CPU</li>
<li>own memory</li>
<li>own network</li>
</ul>

<blockquote>
<p>
all of it is isolated - secure. From their(container) point of view -
they are their own thing. They might as well be installed on bare
metal servers.
</p>
</blockquote>
</div>
</div>
</div>

<div id="outline-container-orgee45807" class="outline-2">
<h2 id="orgee45807">Docker intro</h2>
<div class="outline-text-2" id="text-orgee45807">
</div>
<div id="outline-container-org01ed7ed" class="outline-3">
<h3 id="org01ed7ed">Benefits of Docker</h3>
<div class="outline-text-3" id="text-org01ed7ed">
<p>
Why is Docker so fast?
</p>

<p>
All the OS's, like Ubuntu, Alpine, Arch Linux, CentOS - all of them
using the SAME Linux kernel JUST LIKE the Ubuntu does ON WHICH you
have installed Docker daemon.
</p>

<p>
And with virtual machines - every time you deploy a virtual machine -
that is another linux kernel.. it also involves the hypervisor, which
is kinda heavy, so overall it's just heavy. There are more parts and
pieces that have to be running.
</p>

<blockquote>
<p>
<code>Container</code> - much more simple, lightweight, fast.
</p>
</blockquote>

<p>
You can not mix and match windows and linux OS containers on one
machine. If you want to run windows docker machine - you must have an
underlying windows OS to run it on. Because they share the underlying
os or kernel.
</p>
</div>
</div>

<div id="outline-container-org2501d36" class="outline-3">
<h3 id="org2501d36">Why docker?</h3>
<div class="outline-text-3" id="text-org2501d36">
<p>
As developers - we write our app - it works great on our machines.
Then we want to either deploy it or run on other machines or give it
to a tester - something breaks, does not work.. Having a docker container prevents
this mess.
</p>

<blockquote>
<p>
Hey, it worked on my machine!
</p>
</blockquote>

<p>
No more of that junk. If you deploy in a docker container - everything
the app needs is contained in the container, it's isolated.
</p>
</div>

<div id="outline-container-org7b45629" class="outline-4">
<h4 id="org7b45629">Microservices</h4>
<div class="outline-text-4" id="text-org7b45629">
<p>
Usually you deploy the WHOLE app inside one container or a VM. For
example WordPress. You install WordPress server and MySQL database on
the same machine. But what you can do with docker is install wordpress
server on one container and mysql database on another. So whenever you
want to update wordpress server - you update only just that. Nothing
is in a way, nothing is conflicting, mysql database remains untouched.
Sounds good, I must try experiment with that.
fatal: not a git repository (or any of the parent directories): .git
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org7b3100d" class="outline-2">
<h2 id="org7b3100d">Deploying with Docker</h2>
<div class="outline-text-2" id="text-org7b3100d">
</div>
<div id="outline-container-org375f916" class="outline-3">
<h3 id="org375f916">Creating a platform to work on</h3>
<div class="outline-text-3" id="text-org375f916">
<p>
Create the machine.
</p>

<ul class="org-ul">
<li>Create a simple <a href="https://cloud.linode.com/">Linode</a> node(choosing linode just because I have free
credits for it, choose any other provider you want). In my case I
have chosen Linode 2GB plan and a Docker image. ($10/month)</li>
<li>When your Docker node is running, connect to it through SSH in your
favorite terminal.</li>
<li>That's it, you are in.</li>
</ul>

<p>
Let's create our docker empire!
</p>
</div>
</div>

<div id="outline-container-org4c76512" class="outline-3">
<h3 id="org4c76512">Start pulling the images</h3>
<div class="outline-text-3" id="text-org4c76512">
<div class="org-src-container">
<pre class="src src-bash">docker pull centos
</pre>
</div>

<p>
What this command does - goes to the docker hub(a registry of docker
images). These images are what we use to create our containers.
</p>


<figure id="org51d8c31">
<img src="./static/images/docker1.png" alt="docker1.png" width="1200px">

</figure>

<p>
A few seconds and we are done.
</p>

<p>
Now with this CentOS <code>image</code>, we are going to run our first docker
<code>container</code>. After &#x2013;name - write your custom name and at the end
specify the image. <a href="https://docs.docker.com/engine/reference/commandline/run/">More terminal commands</a> for reference. Or a <a href="https://dockerlabs.collabnix.com/docker/cheatsheet/">cheat
sheet</a>.
</p>
</div>
</div>

<div id="outline-container-orgee55a73" class="outline-3">
<h3 id="orgee55a73">Run the image</h3>
<div class="outline-text-3" id="text-orgee55a73">
<div class="org-src-container">
<pre class="src src-bash">docker run -d -t --name mycontainer centos
</pre>
</div>

<p>
It's running. Crazy how fast it was.
</p>

<p>
Is it really running? Let's check by listing all the running
containers.
</p>
</div>
</div>

<div id="outline-container-org5dff1c3" class="outline-3">
<h3 id="org5dff1c3">List running containers</h3>
<div class="outline-text-3" id="text-org5dff1c3">
<div class="org-src-container">
<pre class="src src-bash">docker ps
</pre>
</div>


<figure id="orgdd437b8">
<img src="./static/images/docker2.png" alt="docker2.png" width="1200px">

</figure>

<p>
Yes it does!
</p>

<p>
CenOS is isolated, secure, running with it's own OS, CPU, memory,
network!
</p>
</div>
</div>

<div id="outline-container-org6976ffc" class="outline-3">
<h3 id="org6976ffc">Access the container</h3>
<div class="outline-text-3" id="text-org6976ffc">
<p>
Let's visit the centOS container.
</p>

<div class="org-src-container">
<pre class="src src-bash">docker exec -it mycontainer bash
</pre>
</div>


<figure id="orga193672">
<img src="./static/images/docker3.png" alt="docker3.png" width="1200px">

</figure>

<p>
It has a complete file system.. it's completely separate..
</p>

<p>
To exit, type exit.
</p>
</div>
</div>

<div id="outline-container-org2beabb7" class="outline-3">
<h3 id="org2beabb7">Playing around</h3>
<div class="outline-text-3" id="text-org2beabb7">
<p>
Let's try another image. Alpine.
</p>

<div class="org-src-container">
<pre class="src src-bash">docker pull alpine
docker run -t -d --name mysecondcontainer alpine
docker ps
</pre>
</div>


<figure id="org7167679">
<img src="./static/images/docker4.png" alt="docker4.png" width="1200px">

</figure>

<p>
Now we have two containers running. Let's go into alpine.
</p>

<div class="org-src-container">
<pre class="src src-bash">docker exec -it mysecondcontainer sh
</pre>
</div>


<figure id="orgfc62e2a">
<img src="./static/images/docker5.png" alt="docker5.png" width="1200px">

</figure>

<p>
I have installed bunch of other images, can find the ones available <a href="https://hub.docker.com/">here</a>.
</p>


<figure id="org3d2b1a4">
<img src="./static/images/docker6.png" alt="docker6.png" width="1200px">

</figure>
</div>
</div>

<div id="outline-container-orgc89e290" class="outline-3">
<h3 id="orgc89e290">Pull and run someone else's container</h3>
<div class="outline-text-3" id="text-orgc89e290">
<p>
For example <a href="https://hub.docker.com/r/thenetworkchuck/networkchuckcoffee/tags?page=1&amp;ordering=name">this</a>.
</p>

<div class="org-src-container">
<pre class="src src-bash">docker pull thenetworkchuck/networkchuckcoffee:ncimage
</pre>
</div>

<p>
Adding :ncimage tag at the end. It was specified by the creator <a href="https://hub.docker.com/r/thenetworkchuck/networkchuckcoffee/tags?page=1&amp;ordering=name">here</a>.
It is basically a version. It's useful to be able to choose a
different version.
</p>

<p>
To run this container(a web app), we do this.
</p>

<div class="org-src-container">
<pre class="src src-bash">docker run -t -d -p 80:80 --name nccoffee thenetworkchuck/networkchuckcoffee:ncimage
</pre>
</div>

<p>
We have specified additional switch <code>-p</code> which stands for <code>ports</code>. 80:80.
The port at the back is the port for docker container and first one is
for the host. Basically saying match port 80 with port 80.
</p>

<p>
Now grab your IP address from your linode dashboard, enter it in the
browser.
</p>


<figure id="orgaf4cb8d">
<img src="./static/images/docker7.png" alt="docker7.png" width="1200px">

</figure>

<p>
I did not set up this website, I did not install any programs or alter
any settings, but by pulling down that image and running the
container - we have a website just like the creator intended.
</p>

<blockquote>
<p>
That container not only has all the cpu, memory etc, but also all the
settings the creator has applied(debian, nginx, website files, etc),
web configuration, all prerequisites, all dependencies.. packaged
together in a neat little package. And you can run it on any linux
machine.
</p>
</blockquote>

<p>
Move it to AWS, to azure, to your computer, my computer, to wherever -
and it's the <code>power of docker</code>.
</p>
</div>
</div>

<div id="outline-container-org87e4efc" class="outline-3">
<h3 id="org87e4efc">Stopping the container</h3>
<div class="outline-text-3" id="text-org87e4efc">

<figure id="orgd431496">
<img src="./static/images/docker8.png" alt="docker8.png" width="1200px">

</figure>

<div class="org-src-container">
<pre class="src src-bash">docker stop nccoffee
</pre>
</div>

<p>
The hosted website is immediately now available anymore.
</p>

<p>
Let's start it again.
</p>

<div class="org-src-container">
<pre class="src src-bash">docker start nccoffee
</pre>
</div>

<p>
It's back up again.
</p>
</div>
</div>

<div id="outline-container-org5dc0678" class="outline-3">
<h3 id="org5dc0678">See the metrics</h3>
<div class="outline-text-3" id="text-org5dc0678">
<div class="org-src-container">
<pre class="src src-bash">docker stats
</pre>
</div>


<figure id="orgaa53828">
<img src="./static/images/docker9.png" alt="docker9.png" width="1200px">

</figure>
</div>
</div>
</div>
<div class="taglist"><a href="https://arvydasg.github.io/tags.html">Tags</a>: <a href="https://arvydasg.github.io/tag-django.html">django</a> <a href="https://arvydasg.github.io/tag-deployment.html">deployment</a> <a href="https://arvydasg.github.io/tag-learning.html">learning</a> </div></div>
<div id="postamble" class="status"><div id="footer">
<hr>
<p>© 2021-2023 Arvydas Gasparavičius</p>
  <script src="static/script.js"></script>
</div></div>
</body>
</html>
