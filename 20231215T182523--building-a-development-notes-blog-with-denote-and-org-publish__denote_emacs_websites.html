<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-06-04 Tue 13:20 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Building a development notes blog with denote and org-publish Notes</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Arvydas Gasparavicius">
<meta name="description" content="Welcome to my devnotes site"
>
<meta name="keywords" content="emacs django">

<link rel="stylesheet" href="./static/css/org-html-style-default.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/generic.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/taingram.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/lightbox.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/scroll-to-top.css" type="text/css"/>
<link rel="icon" href="./static/ag.ico">
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="sitemap.html">NOTES </a>
 
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="preamble" class="status">

	 <!-- Had to comment out this, because of the github actions, read in the docs for more detail -->
	 <!-- <div id="updated">Updated: 2024-06-04 Tue 13:19</div> -->
</div>
<div id="content">
<header>
<h1 class="title">Building a development notes blog with denote and org-publish Notes</h1>
</header>
<div id="outline-container-org9c72885" class="outline-2">
<h2 id="org9c72885"><span class="section-number-2">1</span> QUICK: Generate/update the blog step by step</h2>
<div class="outline-text-2" id="text-1">
<p>
This section basically is a reminder of the steps needed.
</p>

<ul class="org-ul">
<li>Update/create an org file in devnotes directory</li>
<li>Run build command in the terminal to export org to html</li>
<li>Check the .html in the browser, confirm all is good</li>
<li>Commit the org files</li>
<li>Commit ALL html files that have changed during the export (all might change,
have to take into consideration the new file to TOC or somilar)</li>
<li>Publish arvydas.github.io repo changes to see them on <a href="https://arvydas.dev">https://arvydas.dev</a></li>
</ul>

<p>
Please check the in-depth view of how the blog is built
</p>
</div>
</div>

<div id="outline-container-orge042770" class="outline-2">
<h2 id="orge042770"><span class="section-number-2">2</span> Research</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org77a2eee" class="outline-3">
<h3 id="org77a2eee"><span class="section-number-3">2.1</span> Why build a website for development notes anyway</h3>
<div class="outline-text-3" id="text-2-1">
<p>
I have a lot of notes. Over a few systems(at home, at work, under descriptions
of various projects).
</p>

<p>
So I wanted to gather everything in one place and somehow link them together.
It is also nice if I can share that with others. Also, as of <span class="timestamp-wrapper"><span class="timestamp">[2023-12-16 Sat]</span></span>,
having everything about you/your way of working, etc written in one place, is a
perfect for AI systems to grab. All in one place, no need to scrape the whole
Internet. So the AI will for sure know how I like to work and my weak
spots(what I usually write here is what I just learned or don't want to
forget).
</p>

<p>
Also, of my notes are in .org files written in emacs, so of course my website
will also be written in Emacs
</p>

<p>
There are also many <a href="20231214T150411--inspirational-websites__emacs_websites.html">inspirational websites</a> that look nice, are clean and
simple, but not necessarily do the purpose of "development notes storage".
Unless maybe this one - <a href="http://tips.defun.work/">http://tips.defun.work/</a>, which is also my initial
inspiration.
</p>

<p>
Have your devnotes reachable anywhere + be able to share them with others(in a
readable html format in a form of a blog). I am in.
</p>
</div>
</div>

<div id="outline-container-org18825e4" class="outline-3">
<h3 id="org18825e4"><span class="section-number-3">2.2</span> Why use emacs for it</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<a href="20231215T140448--why-build-a-website-with-emacs-and-not-with-something-else__emacs_websites.html">Why build a website with emacs and not with something else</a>
</p>
</div>
</div>

<div id="outline-container-org96310a0" class="outline-3">
<h3 id="org96310a0"><span class="section-number-3">2.3</span> Choosing an Emacs tool to build such website</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Emacs has both built in and external packages that help you to generate .html
files from .org note files.
</p>

<p>
Some of them are:
</p>

<ul class="org-ul">
<li>org-export-dispatcher(export one file at a time) <a href="https://github.com/arvydasg/codeacademy">Codeacademy example</a></li>
<li>ox-publish(alist, export all pages of a project) (<a href="https://github.com/arvydasg/org-publish-project-blog">ox-publish</a>, <a href="https://github.com/arvydasg/emacs_blog/tree/master">emacs blog</a>,
<a href="https://github.com/arvydasg/PKC_AFK/blob/main/AFK/src/pkcwiki/pkc-mano-build-site.el">pkcwiki</a>, <a href="https://github.com/arvydasg/pkc_wiki">pkcwiki2</a>, <a href="20231217T064942--build-a-website-with-emacs-and-ox-publish__emacs_websites.html">my notes about ox-publish</a>)</li>
<li><a href="20231215T101410--create-a-blog-with-emacs-easy-hugo__emacs_hugo_websites.html">create a blog with emacs-easy-hugo</a></li>
<li><a href="20231215T203400--create-a-website-with-ox-hugo__emacs_hugo_websites.html">create a website with ox hugo</a></li>
<li>org-static-blog, <a href="https://github.com/arvydasg/org-static-blog">example</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgc20e937" class="outline-3">
<h3 id="orgc20e937"><span class="section-number-3">2.4</span> ox-publish VS org-static-blog</h3>
<div class="outline-text-3" id="text-2-4">
<p>
At first(<span class="timestamp-wrapper"><span class="timestamp">[2023-12-15 Fri]</span></span>) I was thinking to write the website with
<code>org-static-blog</code>, almost had the blog setup and ready, converted around 50
pages to html already, displayed them under my domain. But then kept seeing
some features that ox-publish has and org-static-blog does not. Thought okay,
let's rethink that. Asked ChatGPT for help:
</p>

<blockquote>
<p>
The choice between using the default ox-publish functionality in Org Mode or
the org-static-blog package to create your Emacs website depends on your
specific requirements and preferences. Let's explore both options:
</p>

<p>
<b>ox-publish in Org Mode</b>:
</p>

<p>
<code>Pros</code>:
</p>

<p>
Flexibility: ox-publish is part of Org Mode and provides considerable
flexibility in customizing your website. You can define various publishing
options, including different output formats and configurations.
</p>

<p>
Integration: It seamlessly integrates with Org Mode, making it easy to manage
content directly within Emacs.
</p>

<p>
Customization: Allows extensive customization using Emacs Lisp, enabling you to
tailor your website to your preferences.
</p>

<p>
<code>Cons</code>:
</p>

<p>
Steep Learning Curve: Setting up and configuring ox-publish might have a
learning curve, especially if you're new to Emacs Lisp and detailed
configuration.
</p>

<p>
<b>org-static-blog Package</b>:
</p>

<p>
<code>Pros</code>:
</p>

<p>
Simplicity: org-static-blog is designed specifically for creating simple blogs
or websites using Org Mode. It's relatively straightforward to set up and use,
making it ideal if you want a quick solution.
</p>

<p>
Minimal Configuration: It requires minimal configuration, making it accessible
for beginners.
</p>

<p>
Focused Purpose: Primarily built for blogs, it might suit your needs if you're
looking for a straightforward blogging platform within Emacs.
</p>

<p>
<code>Cons</code>:
</p>

<p>
Limited Features: It might lack certain advanced features or customization
options compared to ox-publish, especially if you need more complex
functionality.
</p>

<p>
Less Flexible: As it's tailored for static blogs, if your website needs evolve
beyond blogging, you might face limitations.
</p>

<p>
<b>Decision Factors</b>:
</p>

<p>
Complexity vs. Simplicity: Consider how complex or simple you want your website
setup to be.
</p>

<p>
Customization Needs: Evaluate how much flexibility and customization options
you require for your website.
</p>

<p>
Future Growth: Consider whether your website's needs might expand beyond a blog
and if you need features beyond what a blogging-centric package provides.
</p>

<p>
Familiarity with Emacs Lisp: Assess your comfort level with Emacs Lisp, as
ox-publish might require more familiarity.
</p>

<p>
<b>Recommendation</b>:
</p>

<p>
If you prioritize simplicity, quick setup, and your website's focus is
primarily a blog, org-static-blog could be a good starting point.
</p>

<p>
If you foresee needing extensive customization, flexibility, or plan for
features beyond a blog, investing time in learning and using ox-publish might
be more beneficial in the long run.
</p>

<p>
Experiment with both to understand their functionalities and how they align
with your specific website goals. You can start with org-static-blog for a
quick setup and later explore ox-publish for more intricate customization and
flexibility if needed.
</p>
</blockquote>

<p>
These were my thoughts AFTER I have read the ChatGPT response:
</p>

<blockquote>
<p>

</p>

<p>
Of course after reading this I leaned toward <code>ox-publish</code> instead of
org-static-blog. True, I have noticed that it lacks configuration options and
is kind of restraining. I read other people's tutorials on how they use
ox-publish and all the settings they have and I can not try to reuse them with
org-static-blog. Not nice..
</p>

<p>
Also there is this issue that I am facing today(re renders each post). -
<a href="https://github.com/bastibe/org-static-blog/issues/126">https://github.com/bastibe/org-static-blog/issues/126</a>
</p>

<p>
I just hope that tag feature works in ox-publish(it should) - then I am all
good. Let's dive in.
</p>
</blockquote>

<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-12-16 Sat] </span></span> Unfortunately, the tags don't work in ox-publish way of making
a website, so I will have to stick with org-static-blog. Not complaining. It
will force me to read thought the source code more often and and see how I can
use pieces of ox-publish in org-static-blog configuration.
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-12-19 Tue] </span></span> The issue I have mentioned above still bugs me. I can use tags in my website,
BUT I can not compile it from the comfortable place of a custom script(instead
of having the config in my main config), it is not native Emacs, stuff is built
on top of it.. I once again decided to switch my mind and build my website with
built in tools - <a href="20231217T064942--build-a-website-with-emacs-and-ox-publish__emacs_websites.html">Build a website with emacs and ox-publish</a>. I will have ALL the
features of org mode and standard publishing tools, exports will be clean, I
will also be able to have multiple configs for each blog/website and. I will
simply not have the tags.. which I will build on top by myself with the
inspiration of =org-static-blog=(someday in the future). The notes will not be
rendered into html that often, they won't be categorized by tags, but that's
not a big deal. Primary audience for these notes is still - me. I need to be
able to search through them and find the information in them. If it's not as
easy to do that on the web - so be it. I will work on that later.
</p>
</div>
</div>
</div>

<div id="outline-container-org1eedc5b" class="outline-2">
<h2 id="org1eedc5b"><span class="section-number-2">3</span> What is <code>ox-publish</code></h2>
<div class="outline-text-2" id="text-3">
<p>
Best description in a video format is <a href="https://www.youtube.com/watch?v=AfkrzFodoNw&amp;t=1612s&amp;ab_channel=SystemCrafters">here</a>.
</p>

<p>
First things first of course:
</p>

<ul class="org-ul">
<li>Publishing Org-mode files to HTML - <a href="https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html">https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html</a></li>
<li>HTML specific export settings - <a href="https://orgmode.org/manual/HTML-Export.html#HTML-export">https://orgmode.org/manual/HTML-Export.html#HTML-export</a></li>
<li>My personal notes about building websites with <code>ox-publish</code> - <a href="20231217T064942--build-a-website-with-emacs-and-ox-publish__emacs_websites.html">Build a website
with emacs and ox-publish</a></li>
<li><p>
I recommend to get to know to the source code if you like:
</p>
<div class="org-src-container">
<pre class="src src-bash">/org/ox-html.el.gz
/org/ox-publish.el.gz
</pre>
</div></li>
<li><code>C-c C-e #</code> (org-export-dispatch) plus "template" - ALL possible in-file options</li>
<li><code>org-html-preamble-format</code> some useful %a %c %T functions</li>
<li>defaults here - <a href="https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html">https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html</a></li>
<li><p>
IF you want to add html into an org file (not code block), can do it like such:
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="font-weight: bold; font-style: italic;">#+HTML: &lt;div"&gt;Updated:</span>
<span style="font-weight: bold; font-style: italic;">#+HTML: hello</span>
<span style="font-weight: bold; font-style: italic;">#+HTML: &lt;/div&gt;</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org3705e30" class="outline-2">
<h2 id="org3705e30"><span class="section-number-2">4</span> Installation of <code>ox-publish</code></h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgec9f1be" class="outline-3">
<h3 id="orgec9f1be"><span class="section-number-3">4.1</span> Install the package</h3>
<div class="outline-text-3" id="text-4-1">
<p>
It is already installed with Emacs by default.
</p>
</div>
</div>

<div id="outline-container-org31d8c24" class="outline-3">
<h3 id="org31d8c24"><span class="section-number-3">4.2</span> Decide where to place the configuration</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Ox-publish configuration might get large if you start modifying the head,
preamble, postamble.. Also if you have multiple blogs/websites that you want to
publish this way, you need to have two separate configurations.
</p>

<p>
Eventually you realize that you can't store multiple configurations in your
emacs config file.
</p>

<p>
So the solution to this is to create a "build" folder and in it have such
files:
</p>

<div class="org-src-container">
<pre class="src src-bash">devnotes/build/
&#9500;&#9472;&#9472; build.sh
&#9492;&#9472;&#9472; build-site.el
</pre>
</div>

<p>
build.sh should be made to be executable <code>chmo o+x build.sh</code> and it's contents
are:
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/bin/</span><span style="font-weight: bold;">sh</span>
emacs -Q --script build-site.el
</pre>
</div>

<p>
and <code>build-site.el</code> content would contain your ox-publish configuration(we will
remove the configuration from our emacs config and place it in this file with a
couple of additions).
</p>

<p>
That's it. Now when we will run the bash script (<code>./build.sh</code>), it will fetch
the dependencies into the /build directory. It will then do the html conversion
from org files as you have specified and at the end it will print out "Build
complete!"
</p>
</div>
</div>
</div>

<div id="outline-container-org0ccce00" class="outline-2">
<h2 id="org0ccce00"><span class="section-number-2">5</span> Creating .org files to be rendered</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org44aba99" class="outline-3">
<h3 id="org44aba99"><span class="section-number-3">5.1</span> Separate repositories</h3>
<div class="outline-text-3" id="text-5-1">
<p>
We have one dir/repo for source files, another for exported html files. Having
them in separate repos allows us to use ripgrep search easier, allows us to use
<code>project.el</code> simpler, not seeing duplicates of files(one .org, one .html). We
can version control the changes of the .org files as well as html files
separately.
</p>

<div class="org-src-container">
<pre class="src src-bash">/home/nixos/GIT:
drwxr-xr-x 6 nixos users   4096 May 27 15:42 .
drwx------ 6 nixos users   4096 May 27 15:44 ..
drwxr-xr-x 5 nixos users  20480 May 28 15:28 arvydasg.github.io <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">html files lie here</span>
drwxr-xr-x 6 nixos users  20480 May 28 15:30 devnotes <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">source .org (could be other type) files lie here</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga38e43d" class="outline-3">
<h3 id="orga38e43d"><span class="section-number-3">5.2</span> Folder structure of source dir</h3>
<div class="outline-text-3" id="text-5-2">
<p>
When we have at least one .org file in the source directory, we can think about
exporting it to .html.
</p>

<p>
Structure of devnotes folder, an example:
</p>

<div class="org-src-container">
<pre class="src src-bash">/home/nixos/GIT/devnotes:
drwxr-xr-x 6 nixos users 20480 May 28 15:35 .
drwxr-xr-x 6 nixos users  4096 May 27 15:42 ..
drwxr-xr-x 2 nixos users  4096 May 28 13:59 build <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">folder in which the build script lives</span>
drwxr-xr-x 8 nixos users  4096 May 28 15:36 .git  <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">git folder</span>
drwxr-xr-x 3 nixos users  4096 May 27 15:00 media <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">images folder</span>
drwxr-xr-x 4 nixos users  4096 May 27 15:00 static <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">css/js/ico folder</span>
-rw-r--r-- 1 nixos users  1404 May 27 16:30 20231125T235251--api-tools__api.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">denote file</span>
-rw-r--r-- 1 nixos users   646 May 27 15:00 20231126T001334--raspberrypi-first-setup__raspberrypi.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">denote file</span>
-rw-r--r-- 1 nixos users   790 May 27 15:00 20231126T001417--magic-mirror-setup__raspberrypi.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">denote file</span>
-rw-r--r-- 1 nixos users   324 May 27 15:00 20231126T001642--raspberrypi-pins__raspberrypi.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">denote file</span>
  -rw-r--r-- 1 nixos users   225 May 27 15:00 contact.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">simple page that</span>
-rw-r--r-- 1 nixos users   164 May 27 15:00 .dir-locals.el <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">read "denote features" page for explanation to this, has no influence to blog</span>
-rw-r--r-- 1 nixos users   800 May 27 15:00 freelancing.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">random page</span>
-rw-r--r-- 1 nixos users   814 May 27 15:00 index.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">index(front) page of the website</span>
-rw-r--r-- 1 nixos users  1505 May 27 15:00 projects.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">custom list of projects, created the links myself</span>
-rw-r--r-- 1 nixos users    36 May 27 15:00 readme.md
-rw-r--r-- 1 nixos users 23584 May 28 15:28 sitemap.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">automatically generated sitemap</span>
-rw-r--r-- 1 nixos users   817 May 28 15:06 statusupdates.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">random page</span>
-rw-r--r-- 1 nixos users  2728 May 27 15:00 uses.org <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">random page</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org26a990d" class="outline-3">
<h3 id="org26a990d"><span class="section-number-3">5.3</span> Creating new notes with Denote</h3>
<div class="outline-text-3" id="text-5-3">
<p>
I am using Denote package, so I can use it's functionality to create a new
entry. Here are some <a href="20231125T212326--denote-features__emacs.html">denote features</a>.
</p>

<p>
I use Denote for my personal note taking, now I will also use it for
development note taking. Win win.
</p>
</div>
</div>
</div>

<div id="outline-container-orgddc20ea" class="outline-2">
<h2 id="orgddc20ea"><span class="section-number-2">6</span> The build process</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgb1c2a84" class="outline-3">
<h3 id="orgb1c2a84"><span class="section-number-3">6.1</span> <code>ox-publish</code> config file itself</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Now since we have this list of files and folders, we are ready to export them to .html.
</p>

<p>
For that we will need the <code>build script</code>. It's is a single file in which we
describe HOW we want our build configuration to look like.
</p>

<p>
There are many options available. I have written ALL of them (don't get
intimidated by that) so I know what is available. It's better to know what is
available than not to know :)
</p>

<p>
So here is the build script (<a href="https://github.com/azegas/devnotes/blob/master/build/build-site.el">latest version of it</a>):
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ox-publish</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">run this with 'emacs -Q --script build-site.el' command</span>

(<span style="font-weight: bold;">setq</span> org-publish-project-alist
      '(
        (<span style="font-style: italic;">"notes"</span>
         <span style="font-weight: bold;">:base-directory</span> <span style="font-style: italic;">"../"</span>
         <span style="font-weight: bold;">:base-extension</span> <span style="font-style: italic;">"org"</span>
         <span style="font-weight: bold;">:publishing-directory</span> <span style="font-style: italic;">"../../arvydasg.github.io"</span>
         <span style="font-weight: bold;">:recursive</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">use :noexport: tag if you want headings that have it not to be exported</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:exclude</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:include</span>
         <span style="font-weight: bold;">:publishing-function</span> org-html-publish-to-html <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">converts org files to HTML</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:preparation-function</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:completion-function</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">-----------------------------------------------------------------------------------</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">the DETAILS: options set within the individual .org file can</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">override all of the settings below:</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">you can specify majority the options that you see below in each</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">individual file. Find out syntax for it in =C-h v</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-publish-project-alist= and choose the configuration you want to</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">see the syntax for.</span>
         <span style="font-weight: bold;">:author</span> <span style="font-style: italic;">"Arvydas Gasparavicius"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:creator</span>
         <span style="font-weight: bold;">:email</span> <span style="font-style: italic;">"arvydas.gaspa@gmail.com"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:exclude-tags "noexport"</span>
         <span style="font-weight: bold;">:headline-levels</span> 3
         <span style="font-weight: bold;">:language</span> <span style="font-style: italic;">"en"</span>
         <span style="font-weight: bold;">:preserve-breaks</span> nil
         <span style="font-weight: bold;">:section-numbers</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:select-tags</span>
         <span style="font-weight: bold;">:time-stamp-file</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:with-archived-trees</span>
         <span style="font-weight: bold;">:with-author</span> t
         <span style="font-weight: bold;">:with-creator</span> t
         <span style="font-weight: bold;">:with-date</span> t                   <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">date from the filename?</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:with-drawers</span>
         <span style="font-weight: bold;">:with-email</span> t
         <span style="font-weight: bold;">:with-emphasize</span> t
         <span style="font-weight: bold;">:with-entities</span> t
         <span style="font-weight: bold;">:with-fixed-width</span> t
         <span style="font-weight: bold;">:with-footnotes</span> t
         <span style="font-weight: bold;">:with-inlinetasks</span> t
         <span style="font-weight: bold;">:with-latex</span> t
         <span style="font-weight: bold;">:with-planning</span> t
         <span style="font-weight: bold;">:with-priority</span> t
         <span style="font-weight: bold;">:with-properties</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:with-smart-quotes</span>
         <span style="font-weight: bold;">:with-special-strings</span> t
         <span style="font-weight: bold;">:with-statistics-cookies</span>' t
         <span style="font-weight: bold;">:with-sub-superscript</span> nil
         <span style="font-weight: bold;">:with-toc</span> t
         <span style="font-weight: bold;">:with-tables</span> t
         <span style="font-weight: bold;">:with-tags</span> t
         <span style="font-weight: bold;">:with-tasks</span> t
         <span style="font-weight: bold;">:with-timestamps</span> t
         <span style="font-weight: bold;">:with-title</span> t
         <span style="font-weight: bold;">:with-todo-keywords</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">kita dalis</span>
         <span style="font-weight: bold;">:auto-sitemap</span> t
         <span style="font-weight: bold;">:sitemap-filename</span> <span style="font-style: italic;">"sitemap.org"</span>
         <span style="font-weight: bold;">:sitemap-title</span> <span style="font-style: italic;">"Notes"</span>
         <span style="font-weight: bold;">:sitemap-style</span> tree
         <span style="font-weight: bold;">:sitemap-format-entry</span> ag/org-sitemap-date-entry-format
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:sitemap-function</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:sitemap-sort-folders</span>
         <span style="font-weight: bold;">:sitemap-sort-files</span> anti-chronologically
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:sitemap-ignore-case</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:makeindex</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:body-only t</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">-----------------------------------------------------------------------------------</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">ox-html.el.gz</span>

         <span style="font-weight: bold;">:html-doctype</span> <span style="font-style: italic;">"html5"</span>
         <span style="font-weight: bold;">:html-container</span> <span style="font-style: italic;">"div"</span>
         <span style="font-weight: bold;">:html-content-class</span> <span style="font-style: italic;">"content"</span>
         <span style="font-weight: bold;">:description</span> <span style="font-style: italic;">"welcome to my site"</span>
         <span style="font-weight: bold;">:keywords</span> <span style="font-style: italic;">"emacs antanas geles"</span>
         <span style="font-weight: bold;">:html-html5-fancy</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-link-use-abs-url</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-link-home "sitemap.html"</span>
         <span style="font-weight: bold;">:html-link-home</span> <span style="font-style: italic;">"index.html"</span>
         <span style="font-weight: bold;">:html-link-up</span> <span style="font-style: italic;">"sitemap.html"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-mathjax</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-equation-reference-format</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-postamble nil</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-postamble auto                ;with-author/email/creator/date</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-postamble t               ;from :html-postamble-format</span>
         <span style="font-weight: bold;">:html-postamble</span> <span style="font-style: italic;">"&lt;hr/&gt;</span>
<span style="font-style: italic;">         &lt;footer&gt;</span>
<span style="font-style: italic;">         &lt;div class=\"copyright-container generated\"&gt;</span>
<span style="font-style: italic;">         &lt;div class=\"copyright\"&gt;</span>
<span style="font-style: italic;">         Copyright &amp;copy; 2023-2024 Arvydas Gasparavicius</span>
<span style="font-style: italic;">         &lt;/div&gt;</span>
<span style="font-style: italic;">         &lt;/div&gt;</span>
<span style="font-style: italic;">         &lt;p class=\"date\"&gt;This org file is &lt;u&gt;exported&lt;/u&gt; to HTML: %T&lt;/p&gt;</span>
<span style="font-style: italic;">         &lt;p class=\"date\"&gt;This org file is last &lt;u&gt;modified&lt;/u&gt;: %C&lt;/p&gt;</span>
<span style="font-style: italic;">         &lt;p class=\"date\"&gt;This org file is &lt;u&gt;created&lt;/u&gt;: %d&lt;/p&gt;</span>
<span style="font-style: italic;">         &lt;div class=\"generated\"&gt;</span>
<span style="font-style: italic;">        Created with %c on &lt;a href=\"https://www.gnu.org\"&gt;GNU&lt;/a&gt;/&lt;a href=\"https://www.kernel.org/\"&gt;Linux&lt;/a&gt;</span>
<span style="font-style: italic;">        &lt;/div&gt;</span>
<span style="font-style: italic;">        &lt;/footer&gt;</span>
<span style="font-style: italic;">         &lt;button onclick=\"topFunction()\" id=\"myBtn\" title=\"Go to top\"&gt;Top&lt;/button&gt;</span>
<span style="font-style: italic;">         &lt;script src=\"./static/js/generic.js\"&gt;&lt;/script&gt;</span>
<span style="font-style: italic;">         &lt;script src=\"./static/js/scroll-to-top.js\"&gt;&lt;/script&gt;</span>
<span style="font-style: italic;">         &lt;script src=\"./static/js/lightbox.js\"&gt;&lt;/script&gt;</span>
<span style="font-style: italic;">         &lt;script src=\"./static/js/test.js\"&gt;&lt;/script&gt;"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-preamble t                 ;insert a default one, which in none</span>
         <span style="font-weight: bold;">:html-preamble</span>  <span style="font-style: italic;">"&lt;div id=\"updated\"&gt;Updated: %C&lt;/div&gt;"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-head</span>
         <span style="font-weight: bold;">:html-head</span> <span style="font-style: italic;">"</span>
<span style="font-style: italic;">&lt;link rel=\"stylesheet\" href=\"./static/css/org-html-style-default.css\" type=\"text/css\"/&gt;</span>
<span style="font-style: italic;">&lt;link rel=\"stylesheet\" href=\"./static/css/generic.css\" type=\"text/css\"/&gt;</span>
<span style="font-style: italic;">&lt;link rel=\"stylesheet\" href=\"./static/css/taingram.css\" type=\"text/css\"/&gt;</span>
<span style="font-style: italic;">&lt;link rel=\"stylesheet\" href=\"./static/css/lightbox.css\" type=\"text/css\"/&gt;</span>
<span style="font-style: italic;">&lt;link rel=\"stylesheet\" href=\"./static/css/scroll-to-top.css\" type=\"text/css\"/&gt;</span>
<span style="font-style: italic;">&lt;link rel=\"icon\" href=\"./static/ag.ico\"&gt;</span>
<span style="font-style: italic;">"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-head-extra "&lt;link rel=\"stylesheet\" href=\"https://arvydas.dev/static/style.css\" type=\"text/css\"/&gt;"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-head-extra "&lt;link rel=\"stylesheet\" href=\"./static/style.css\" type=\"text/css\"/&gt;"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:subtitle "this is a subtitle"</span>
         <span style="font-weight: bold;">:html-head-include-default-style</span> nil         <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">turning them off, but adding in a separate file called org-html-style-default.css</span>
         <span style="font-weight: bold;">:html-head-include-scripts</span> nil
         <span style="font-weight: bold;">:html-allow-name-attribute-in-anchors</span> nil
         <span style="font-weight: bold;">:html-divs</span> ((preamble <span style="font-style: italic;">"div"</span> <span style="font-style: italic;">"preamble"</span>)
                     (content <span style="font-style: italic;">"div"</span> <span style="font-style: italic;">"content"</span>)
                     (postamble <span style="font-style: italic;">"div"</span> <span style="font-style: italic;">"postamble"</span>))
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-checkbox-type</span>
         <span style="font-weight: bold;">:html-extension</span> <span style="font-style: italic;">"html"</span>
         <span style="font-weight: bold;">:html-footnote-format</span> <span style="font-style: italic;">"&lt;sup&gt;%s&lt;/sup&gt;"</span>
         <span style="font-weight: bold;">:html-footnote-separator</span> <span style="font-style: italic;">"&lt;sup&gt;, &lt;/sup&gt;"</span>
         <span style="font-weight: bold;">:html-footnotes-section</span> <span style="font-style: italic;">"&lt;div id=\"footnotes\"&gt;\n&lt;h2 class=\"footnotes\"&gt;%s: &lt;/h2&gt;\n&lt;div id=\"text-footnotes\"&gt;\n%s\n&lt;/div&gt;\n&lt;/div&gt;"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-format-drawer-function</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-format-headline-function</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-format-inlinetask-function</span>
         <span style="font-weight: bold;">:html-home/up-format</span> <span style="font-style: italic;">"&lt;div id=\"org-div-home-and-up\"&gt;\n &lt;a accesskey=\"h\" href=\"%s\"&gt;NOTES &lt;/a&gt;\n \n &lt;a accesskey=\"H\" href=\"%s\"&gt; HOME &lt;/a&gt;\n&lt;/div&gt;"</span>
         <span style="font-weight: bold;">:html-indent</span> nil
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-infojs-options</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-infojs-template</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-inline-image-rules</span>
         <span style="font-weight: bold;">:html-link-org-files-as-html</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-mathjax-options</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-mathjax-template</span>
         <span style="font-weight: bold;">:html-metadata-timestamp-format</span> <span style="font-style: italic;">"%Y-%m-%d %a %H:%M"</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-postamble-format</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-preamble-format</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-prefer-user-labels nil</span>
         <span style="font-weight: bold;">:html-self-link-headlines</span> nil
         <span style="font-weight: bold;">:html-table-align-individual-fields</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-table-caption-above t</span>
         <span style="font-weight: bold;">:html-table-data-tags</span> (<span style="font-style: italic;">"&lt;td%s&gt;"</span> . <span style="font-style: italic;">"&lt;/td&gt;"</span>)
         <span style="font-weight: bold;">:html-table-header-tags</span> (<span style="font-style: italic;">"&lt;th scope=\"%s\"%s&gt;"</span> . <span style="font-style: italic;">"&lt;/th&gt;"</span>)
         <span style="font-weight: bold;">:html-table-use-header-tags-for-first-column</span> nil
         <span style="font-weight: bold;">:html-tag-class-prefix</span> <span style="font-style: italic;">"gaid"</span>
         <span style="font-weight: bold;">:html-text-markup-alist</span> ((bold . <span style="font-style: italic;">"&lt;b&gt;%s&lt;/b&gt;"</span>)
                                  (code . <span style="font-style: italic;">"&lt;code&gt;%s&lt;/code&gt;"</span>)
                                  (italic . <span style="font-style: italic;">"&lt;i&gt;%s&lt;/i&gt;"</span>)
                                  (strike-through . <span style="font-style: italic;">"&lt;del&gt;%s&lt;/del&gt;"</span>)
                                  (underline . <span style="font-style: italic;">"&lt;span class=\"underline\"&gt;%s&lt;/span&gt;"</span>)
                                  (verbatim .  <span style="font-style: italic;">"&lt;code&gt;%s&lt;/code&gt;"</span>))
         <span style="font-weight: bold;">:html-todo-kwd-class-prefix</span> <span style="font-style: italic;">""</span>
         <span style="font-weight: bold;">:html-toplevel-hlevel</span> 2
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-use-infojs</span>
         <span style="font-weight: bold;">:html-validation-link</span> nil
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-validation-link "&lt;a href=\"https://validator.w3.org/check?uri=referer\"&gt;Validate&lt;/a&gt;"</span>
         <span style="font-weight: bold;">:html-viewport</span>  ((width <span style="font-style: italic;">"device-width"</span>)
                          (initial-scale <span style="font-style: italic;">"1"</span>)
                          (minimum-scale <span style="font-style: italic;">""</span>)
                          (maximum-scale <span style="font-style: italic;">""</span>)
                          (user-scalable <span style="font-style: italic;">""</span>))
         <span style="font-weight: bold;">:html-inline-images</span> t
         <span style="font-weight: bold;">:html-table-attributes</span> (<span style="font-weight: bold;">:border</span> <span style="font-style: italic;">"2"</span> <span style="font-weight: bold;">:cellspacing</span> <span style="font-style: italic;">"0"</span> <span style="font-weight: bold;">:cellpadding</span> <span style="font-style: italic;">"6"</span> <span style="font-weight: bold;">:rules</span> <span style="font-style: italic;">"groups"</span> <span style="font-weight: bold;">:frame</span> <span style="font-style: italic;">"hsides"</span>)
         <span style="font-weight: bold;">:html-table-row-open-tag</span> <span style="font-style: italic;">"&lt;tr&gt;"</span>
         <span style="font-weight: bold;">:html-table-row-close-tag</span> <span style="font-style: italic;">"&lt;/tr&gt;"</span>
         <span style="font-weight: bold;">:html-xml-declaration</span> ((<span style="font-style: italic;">"html"</span> . <span style="font-style: italic;">"&lt;?xml version=\"1.0\" encoding=\"%s\"?&gt;"</span>)
                                (<span style="font-style: italic;">"php"</span> . <span style="font-style: italic;">"&lt;?php echo \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"%s\\\" ?&gt;\"; ?&gt;"</span>))
         <span style="font-weight: bold;">:html-wrap-src-lines</span> nil
         <span style="font-weight: bold;">:html-klipsify-src</span> nil         <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">making it to t - jupyterhub like code blocks. Insane!</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-klipse-css</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-klipse-js</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:html-klipse-selection-script</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:infojs-opt</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:creator</span>
         <span style="font-weight: bold;">:with-latex</span> t
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:latex-header</span>
         )

        (<span style="font-style: italic;">"static"</span>
         <span style="font-weight: bold;">:base-directory</span> <span style="font-style: italic;">"../static"</span>
         <span style="font-weight: bold;">:publishing-directory</span> <span style="font-style: italic;">"../../arvydasg.github.io/static"</span>
         <span style="font-weight: bold;">:base-extension</span> <span style="font-style: italic;">"css</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">js</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">ico</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">svg"</span>
         <span style="font-weight: bold;">:recursive</span> t
         <span style="font-weight: bold;">:publishing-function</span> org-publish-attachment <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">copies the files verbatim</span>
         )

        (<span style="font-style: italic;">"media"</span>
         <span style="font-weight: bold;">:base-directory</span> <span style="font-style: italic;">"../media"</span>
         <span style="font-weight: bold;">:publishing-directory</span> <span style="font-style: italic;">"../../arvydasg.github.io/media"</span>
         <span style="font-weight: bold;">:base-extension</span> <span style="font-style: italic;">"png</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">jpg</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">jpeg</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">pdf"</span>
         <span style="font-weight: bold;">:recursive</span> t
         <span style="font-weight: bold;">:publishing-function</span> org-publish-attachment <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">copies the files verbatim</span>
         )

        (<span style="font-style: italic;">"build-site.el"</span> <span style="font-weight: bold;">:components</span> (<span style="font-style: italic;">"notes"</span> <span style="font-style: italic;">"static"</span> <span style="font-style: italic;">"media"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ag/org-sitemap-date-entry-format</span> (entry style project)
  <span style="font-style: italic;">"Format ENTRY in org-publish PROJECT Sitemap format ENTRY ENTRY</span>
<span style="font-style: italic;"> STYLE format that includes date."</span>
  (<span style="font-weight: bold;">let</span> ((filename (org-publish-find-title entry project)))
    (<span style="font-weight: bold;">if</span> (= (length filename) 0)
        (format <span style="font-style: italic;">"*%s*"</span> entry)
      (format <span style="font-style: italic;">"{{{timestamp(%s)}}} [[file:%s][%s]]"</span>
              (format-time-string <span style="font-style: italic;">"%Y-%m-%d"</span>
                                  (org-publish-find-date entry project))
              entry
              filename))))

(<span style="font-weight: bold;">setq</span> org-export-global-macros
      '((<span style="font-style: italic;">"timestamp"</span> . <span style="font-style: italic;">"@@html:&lt;span class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">publish all the projects described in this file :components part</span>
(org-publish-all t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">publish only specific project</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">The t parameter tells it to regenerate all ;; files regardless of when they</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">were last generated)so no need to add the ;; force prefix with C-c C-e C-f</span>
(org-publish <span style="font-style: italic;">"my-org-site"</span> t)

(message <span style="font-style: italic;">"Build complete!"</span>)
</pre>
</div>

<p>
You can see everything in it&#x2026; How I specify directories, how I name the
author, what is my nav(preamble), what is my footer (postamble), how I added
css files, how I added js files, how I added a theme, how I created folders for
images and css/js files, etc&#x2026;.
</p>
</div>
</div>

<div id="outline-container-org444b211" class="outline-3">
<h3 id="org444b211"><span class="section-number-3">6.2</span> Running the build (generating the .html files from .org files)</h3>
<div class="outline-text-3" id="text-6-2">
<p>
After you have studied the config file and you understand what's happening, we
can now launch this script while in <code>/home/nixos/GIT/devnotes/build</code>. Write
<code>./build.sh</code> in shell and it will run the exportation.
</p>

<p>
<code>./build.sh</code> is basically creates a "naked" emacs instance which runs our
configuration file:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/bin/</span><span style="font-weight: bold;">sh</span>
emacs -Q --script build-site.el
</pre>
</div>

<p>
After the export - check the html file folder, you should see the html files
generated as you like. Open them in the browser to check. Commit if happy,
modify the build script if not happy.
</p>
</div>
</div>

<div id="outline-container-orga33c032" class="outline-3">
<h3 id="orga33c032"><span class="section-number-3">6.3</span> Previewing the generated site</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Now that we have a few .org file notes in our directory and we have exported
them into html, we can preview them. Open the .html file and it will open in
the browser.
</p>
</div>

<div id="outline-container-org1ee7181" class="outline-4">
<h4 id="org1ee7181"><span class="section-number-4">6.3.1</span> Preview the html file in the browser</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
If the file on my wsl lies here:
</p>

<p>
<a href="file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/index.html">file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/index.html</a>, I would
open the whole html directory instead of a single file
(<a href="file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/">file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/</a>) to preview the
contents of it in the browser. This allows me to quickly open the files that I
want and see what has changed.
</p>

<p>
how to implement - here
<a href="https://systemcrafters.net/publishing-websites-with-org-mode/building-the-site/">https://systemcrafters.net/publishing-websites-with-org-mode/building-the-site/</a>
</p>
</div>
</div>

<div id="outline-container-org95bc2f0" class="outline-4">
<h4 id="org95bc2f0"><span class="section-number-4">6.3.2</span> Preview with simple-httpd</h4>
<div class="outline-text-4" id="text-6-3-2">
<p>
Or you can use <code>simple-httpd</code>. It's a package that can host your files as a
website on your local machine so that you can pull it up in your browser.
</p>

<p>
You can install simple-httpd from MELPA using M-x package-install or by putting
the following snippet in your Emacs configuration if you have use-package
installed and MELPA configured as a package source(install it globally in your
emacs config, not in build-site.el file):
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package simple-httpd
  <span style="font-weight: bold;">:ensure</span> t)
</pre>
</div>

<p>
Now you can run M-x httpd-serve-directory. It will prompt you for a directory
to serve from within Emacs.
</p>

<p>
Select the path of your public/ directory and then open your browser to
<a href="http://localhost:8080">http://localhost:8080</a> to see the preview of your site! Set httpd-port to change
the default port if necessary.
</p>

<p>
Any time you regenerate the site files, you can just reload the page to see the
result of changes you made! (if you need to do a refresh, then it's the same as
opening in the browser&#x2026;). That's why I don't bother with simple-httpd.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org591a647" class="outline-2">
<h2 id="org591a647"><span class="section-number-2">7</span> Publishing process</h2>
<div class="outline-text-2" id="text-7">
<p>
I am using github pages. It is possible to host static html pages from it for
free. Here is a tutorial how it is done - <a href="20231212T123552--deploy-a-static-website-with-github-pages__git_websites.html">deploy a static website with github
pages</a>.
</p>

<p>
To later add a domain name to your site, follow this tut - <a href="20231214T094426--setup-custom-domain-for-github-pages__git_websites.html">setup custom domain
for github pages</a>
</p>
</div>

<div id="outline-container-org3ad785b" class="outline-3">
<h3 id="org3ad785b"><span class="section-number-3">7.1</span> Manual workflow</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Good if you want to preview the changes locally first, only then commit.
</p>

<ul class="org-ul">
<li>I first make changes in my devnote directory</li>
<li>Run ./build.sh locally</li>
<li>Check the output(html files) in arvydasg.github.io local repository</li>
<li>If all is good, commit the .org files to devnote directory</li>
<li>Commit the .html files to arvydasg.github.io directory</li>
</ul>

<p>
This was the primary way of working before setting up github actions before
<span class="timestamp-wrapper"><span class="timestamp">[2024-06-03 Mon]</span></span>.
</p>

<p>
At first I was trying to create this workflow myself, manually, dealing with
two repos, figuring out the paths, realizing that I need to use some secret
keys, etc&#x2026; but it was a struggle and then I found this -
<a href="https://cpina.github.io/push-to-another-repository-docs/">https://cpina.github.io/push-to-another-repository-docs/</a>, but it did not work
for me as expected, so I went back to manual way of creating a github action
that I want. Each mistake led me to the direction I needed to go. Did not give
up and made it :)
</p>

<p>
Here is how I made it:
</p>
</div>
</div>

<div id="outline-container-orgf242fae" class="outline-3">
<h3 id="orgf242fae"><span class="section-number-3">7.2</span> Automated workflow with github actions</h3>
<div class="outline-text-3" id="text-7-2">
<p>
Took me the whole day today (<span class="timestamp-wrapper"><span class="timestamp">[2024-06-03 Mon]</span></span>) to figure this one out&#x2026;
</p>

<p>
I learned about <a href="20240603T163640--ssh-into-your-github-action-worker-in-the-middle-of-workflow-run__git.html">stepping into the github action containe midrun</a>, a very cool
way to debug your github action.
</p>

<p>
I learned that I must create a personal access token here -
<a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a> (mark repository tick) and then add the
token to the devnotes repo(from which you are running the action) here -
<a href="https://github.com/azegas/test/settings/secrets/actions">https://github.com/azegas/test/settings/secrets/actions</a>. Name the secret
variable <code>GH_PAT</code>
</p>

<p>
And here is the first working config (<a href="https://github.com/azegas/devnotes/blob/master/.github/workflows/deploy.yml">current version</a>):
</p>

<div class="org-src-container">
<pre class="src src-yaml">name: Publish to arvydasg.github.io

on:
  push:
    branches:
      - master

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout devnotes repository
	uses: actions/checkout@v3

      - name: Install Emacs
	run: |
	  # install terminal version of emacs
	  sudo apt install emacs-nox --yes

      - name: Run build.sh Script
	run: |
	  cd build/
	  ./build.sh

      # directory after build.sh run script - /home/runner/work/devnotes/devnotes
      # source directory - /home/runner/work/devnotes/devnotes
      # destination directory - /home/runner/work/devnotes/arvydasg.github.io
      # tmp directory - /tmp
      # test repo to which to push stuff - https://github.com/azegas/test.git

      - name: Clone arvydasg.github.io repo
	run: |
	  cd /tmp
	  git clone https://github.com/azegas/arvydasg.github.io.git
	  ls -la

      - name: Copy content from source to arvydasg.github.io repo
	run: |
	  cd /tmp/arvydasg.github.io
	  cp -r /home/runner/work/devnotes/arvydasg.github.io/* .
	  ls -la

      - name: Authenticate myself to git
	run: |
	  cd /tmp/arvydasg.github.io
	  pwd
	  git ls-remote --get-url origin
	  git config --global user.email "azegaspa@gmail.com"
	  git config --global user.name "BOT"
	  git config --global -l

      - name: Commit the changes
	run: |
	  cd /tmp/arvydasg.github.io
	  git add .
	  git commit -m "yay"
	  git status

      - name: Push changes to arvydasg.github.io repo (using GitHub personal access token)
	env:
	  GH_PAT: ${{ secrets.GH_PAT }}
	run: |
	  # so it's only necessary to set up the github secret for devnotes repo, not for arvydasg.github.io repo
	  cd /tmp/arvydasg.github.io
	  git remote set-url origin https://$GH_PAT@github.com/azegas/arvydasg.github.io.git
	  git push origin master

      # - name: Setup tmate session
      #   uses: mxschmitt/action-tmate@v3
</pre>
</div>

<p>
Now by having this in <code>.github/workflows/deploy.yml</code> file, whenever you make a
commit to <code>devnotes</code> repo, arvydasg.github.io repo will get updated with the
html content, effectively updating the arvydas.dev site.
</p>

<p>
So now I will never have to manually do a push again. Its good that I dont have
to push to see the site, can develop locally, test locally, push only when the
changes ready.
</p>
</div>
</div>

<div id="outline-container-org7530d52" class="outline-3">
<h3 id="org7530d52"><span class="section-number-3">7.3</span> Fix commit message</h3>
<div class="outline-text-3" id="text-7-3">
<p>
I want to make the <code>devnotes</code> repo commit link to show in <code>arvydasg.github.io</code>
repo commit that was automatically made with github action.
</p>

<p>
Tried checking out this documentation -
<a href="https://docs.github.com/en/actions/learn-github-actions/variables#default-environment-variables">https://docs.github.com/en/actions/learn-github-actions/variables#default-environment-variables</a>
</p>

<p>
And then from it, tried using some of the "context" variables like so:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">env:</span>
<span style="font-weight: bold; font-style: italic;">#   </span><span style="font-weight: bold; font-style: italic;">ORIGINAL_COMMIT_MESSAGE: ${{ github.event.head_commit.message }}</span>
<span style="font-weight: bold; font-style: italic;">#   </span><span style="font-weight: bold; font-style: italic;">GITHUB_RUN_ID: ${{ github.run_id }}</span>
<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">git commit -m "Automated commit. Original commit: $ORIGINAL_COMMIT_MESSAGE - GitHub Actions Run ID: $GITHUB_RUN_ID"</span>
<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Automated commit. Original commit: mod - GitHub Actions Run ID: 93562&#8230;&#8230;34702</span>

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">git commit -m "$GITHUB_SHA, $GITHUB_WORKFLOW_SHA, $GITHUB_TRIGGERING_ACTOR"</span>
<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">bed1324733be364f7e7f61417c77f57e3873da08, bed1324733be364f7e7f61417c7&#8230;&#8230;7f57e3873da08, azegas</span>
</pre>
</div>

<p>
But I did not like that there were no hyperlinks, only some jibberish. But from
the example above, you can find t he commit with it -
<a href="https://github.com/azegas/devnotes/commit/bed1324733be364f7e7f61417c77f57e3873da08">bed1324733be364f7e7f61417c77f57e3873da08</a>. But no hyperlink&#x2026;
</p>

<p>
I finally found a way to make a commit message with a hyperlink:
</p>

<div class="org-src-container">
<pre class="src src-yaml">- name: Commit the changes with dynamic message
  env:
    GITHUB_SHA: ${{ github.sha }}
    REPO: ${{ github.repository }}
  run: |
    cd /tmp/arvydasg.github.io
    COMMIT_URL="https://github.com/${REPO}/commit/${GITHUB_SHA}"
    COMMIT_MESSAGE="Automated commit for - ${COMMIT_URL}"
    git add .
    git commit -m "${COMMIT_MESSAGE}"
    git status
</pre>
</div>

<p>
Added this to my main config.
</p>
</div>
</div>

<div id="outline-container-org0e76a39" class="outline-3">
<h3 id="org0e76a39"><span class="section-number-3">7.4</span> Problem with "date modified"</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Commit that did this change -
<a href="https://github.com/azegas/devnotes/commit/f5471491056b4e055fbc8a9556d18fc141ffd2f5">https://github.com/azegas/devnotes/commit/f5471491056b4e055fbc8a9556d18fc141ffd2f5</a>
</p>

<p>
At the top of each page, I would have this rendered for example in the
preamble - <b><b>"Updated: 2024-06-04 Tue 04:46"</b></b>. Basically an identification
when the particular post was last updated.
</p>

<p>
Now this will be removed, and I will explain why below.
</p>

<p>
But first, a few issues with this "updated date" box in the first place:
</p>

<blockquote>
<ul class="org-ul">
<li>It shows wrong time, not the current Lithuanian time</li>
<li>IF a small change is made in the pramble or postamble of the whole site, the
pages get REGENERATED and therefore, their date when they are updated get
changed. Even though the content of the page did not change. I don't like
that. The idea was to track only the date modified of the post, not of the
html that surrounds it.</li>
<li>IF you delete some files in the arvydasg.github.io repo and then regenerate
them again - "updated" date  will be inaccurate again . Not good.</li>
</ul>
</blockquote>

<p>
Basically the last point is the main reason why I have to remove this feature.
</p>
</div>

<div id="outline-container-orgae31bf7" class="outline-4">
<h4 id="orgae31bf7"><span class="section-number-4">7.4.1</span> Workflow before github actions</h4>
<div class="outline-text-4" id="text-7-4-1">
<p>
Before github actions, only the pages that have changed would get regenerated.
</p>

<p>
Now - since it's happening in the pre-commit and is temporary, all the files
are being freshly generated by each github action run. Therefore rendering this
"updated" field useless.
</p>

<p>
So I will simply leave the "created" field at the bottom of the page for those
who are interested and remove everything else.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org3eac6de" class="outline-2">
<h2 id="org3eac6de"><span class="section-number-2">8</span> Nice to haves</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orge1322d1" class="outline-3">
<h3 id="orge1322d1"><span class="section-number-3">8.1</span> Include a portion of another file in an org file</h3>
<div class="outline-text-3" id="text-8-1">
<p>
A single line does this - <code>#+INCLUDE: "sitemap.org" :lines "12-20"</code>
</p>

<p>
This will include 12-20th lines of the <code>sitemap.org</code> page. Can simply open
sitemap.org page to check what lines you want to include.
</p>

<p>
Useful when you want to add a list of sitemap in index.html page for example.
</p>
</div>
</div>

<div id="outline-container-org2343a2e" class="outline-3">
<h3 id="org2343a2e"><span class="section-number-3">8.2</span> Individual files customization options</h3>
<div class="outline-text-3" id="text-8-2">
<p>
We are specifying all the configuration in the <code>build-site.el</code> file, however,
you can still make some changes to the individual files.
</p>

<p>
Check like it's done in <code>index.html</code>
</p>

<p>
Here are the things you can modify:
</p>

<div class="org-src-container">
<pre class="src src-org">#+title: <span style="font-weight: bold;">Freelancing</span>
#+date: &lt;2020-01-01 Sun 01:01&gt;
<span style="font-weight: bold; font-style: italic;">#+description:</span>
<span style="font-weight: bold; font-style: italic;">#+filetags:</span>
<span style="font-weight: bold; font-style: italic;">#+OPTIONS: toc:nil</span>
<span style="font-weight: bold; font-style: italic;">#+OPTIONS: num:nil</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3723eb9" class="outline-3">
<h3 id="org3723eb9"><span class="section-number-3">8.3</span> Generating pages with code blocks</h3>
<div class="outline-text-3" id="text-8-3">
<p>
So far we've been looking at a very simple example page that doesn't really have much on it. What happens when we try to generate a more elaborate Org file containing code blocks?
</p>

<p>
Let's try it out with another file, a version of my literate Emacs configuration called Emacs.org!
</p>

<p>
If you're generating a site that features code blocks like a coding blog or a literate Emacs configuration, you'll probably see an error like this when you generate the site:
</p>


<p>
Cannot fontify source block (htmlize.el &gt;= 1.34 required)
</p>

<p>
To resolve this issue, you will need to install the htmlize package from MELPA. We can automate the process of installing this package by adding the following snippet to our build-site.el file:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Set the package installation directory so that packages aren't stored in the</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">~/.emacs.d/elpa path.</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">package</span>)
(<span style="font-weight: bold;">setq</span> package-user-dir (expand-file-name <span style="font-style: italic;">"./.packages"</span>))
(<span style="font-weight: bold;">setq</span> package-archives '((<span style="font-style: italic;">"melpa"</span> . <span style="font-style: italic;">"https://melpa.org/packages/"</span>)
                         (<span style="font-style: italic;">"elpa"</span> . <span style="font-style: italic;">"https://elpa.gnu.org/packages/"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Initialize the package system</span>
(package-initialize)
(<span style="font-weight: bold;">unless</span> package-archive-contents
  (package-refresh-contents))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Install dependencies</span>
(package-install 'htmlize)
</pre>
</div>

<p>
In this snippet, we load Emacs' package manager and configure the
package-user-dir to be a sub-directory of our project folder. This allows you
to install packages for the script without mixing them up with the packages of
your personal Emacs configuration!
</p>

<p>
The next thing we do is add MELPA to the package archive list and refresh the
package archive so that htmlize can be found. Finally, we call package-install
to install it!
</p>

<p>
In a future video I'll show you how to convert your Emacs color theme to a CSS
file that you can use to colorize source blocks with exactly the same colors
used in the theme!
</p>
</div>
</div>

<div id="outline-container-org2a42e86" class="outline-3">
<h3 id="org2a42e86"><span class="section-number-3">8.4</span> Important information about linking between .org files</h3>
<div class="outline-text-3" id="text-8-4">
<p>
Github link to issue - <a href="https://github.com/protesilaos/denote/issues/369">https://github.com/protesilaos/denote/issues/369</a>
</p>

<p>
As of <span class="timestamp-wrapper"><span class="timestamp">[2023-12-17 Sun] </span></span> denote links do not work with exporting to html. Talked
with Prot about it, there is no fix for it now. So what I do now is I create
file links(C-c C-l file: &lt;and your filename&gt;) instead of denote links, these do
work. Also, if you get a link wrong and it is not possible to render it, the
compilation of html pages will break. That's good, because by checking the logs
you will see the broken link and can fix it. If you don't want the compilation
to stop, you can add this in your config:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-export-with-broken-links 'mark)
</pre>
</div>

<p>
You will simply see this in your html page(I prefer to know that there are
broken links during the html compilation, so I don't put the code above in my config).
</p>

<blockquote>
<p>
[BROKEN LINK: denote:20231125T212326]
</p>
</blockquote>

<p>
Naming the links:
</p>

<p>
Example taken from here - <a href="https://orgmode.org/manual/Links-in-HTML-export.html">https://orgmode.org/manual/Links-in-HTML-export.html</a>
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="font-weight: bold; font-style: italic;">#+ATTR_HTML: :title The Org mode website :style color:red;</span>
<span style="text-decoration: underline;"><a href="https://orgmode.org">https://orgmode.org</a></span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org81cd7a4" class="outline-3">
<h3 id="org81cd7a4"><span class="section-number-3">8.5</span> CSS support in HTML export</h3>
<div class="outline-text-3" id="text-8-5">
<p>
Official docs for css support in HTML export - <a href="https://orgmode.org/manual/CSS-support.html">https://orgmode.org/manual/CSS-support.html</a>
</p>

<p>
There are a few options when it comes to custom CSS on your website generated
with Emacs.
</p>
</div>

<div id="outline-container-org7674277" class="outline-4">
<h4 id="org7674277"><span class="section-number-4">8.5.1</span> Use the default styles from ox-html</h4>
<div class="outline-text-4" id="text-8-5-1">
<p>
You have to do nothing, <code>ox-html</code> - <code>org-html-style-default</code> got you covered.
And it looks pretty good already by default.
</p>

<p>
But you can do like I did, went to <code>org-html-style-default</code> and copied the CSS
from there, placed in my own stylesheet. I can customize the look myself now a
little. Don't have to rewrite everything - just the parts that I want.
</p>

<p>
Also it's good to have the default styles as a reference close to me rather
than somewhere deep in the emacs docs.
</p>
</div>
</div>

<div id="outline-container-org09ab687" class="outline-4">
<h4 id="org09ab687"><span class="section-number-4">8.5.2</span> Add custom classes to blocks of text/code</h4>
<div class="outline-text-4" id="text-8-5-2">
<p>
<a href="https://orgmode.org/manual/HTML-doctypes.html">https://orgmode.org/manual/HTML-doctypes.html</a>
</p>
</div>
</div>

<div id="outline-container-org4f8766b" class="outline-4">
<h4 id="org4f8766b"><span class="section-number-4">8.5.3</span> import custom css</h4>
<div class="outline-text-4" id="text-8-5-3">
<p>
Default html export engine already has us covered with basic css, you can
enable/disable it like so:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold;">:html-head-include-default-style</span> t/nil
</pre>
</div>

<p>
But you might want to change the default css. Best bet is to do something like
this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold;">:html-head</span> <span style="font-style: italic;">"&lt;link rel=\"stylesheet\" href=\"../static/style.css\" type=\"text/css\"/&gt;"</span>
</pre>
</div>

<p>
Basically whatever you put in <code>style.css</code> now will end up in every html page of
yours. We can add any information you like there. But for now I am concerned
about css and favicon. This will link to my own style.css file, but you can
also use CDN's or bootstrap or whatever else.
</p>

<p>
Use your own config from another website/blog for example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold;">:html-head-extra</span> <span style="font-style: italic;">"&lt;link rel=\"stylesheet\" href=\"https://arvydas.dev/static/style.css\" type=\"text/css\"/&gt;"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeebd22d" class="outline-4">
<h4 id="orgeebd22d"><span class="section-number-4">8.5.4</span> org-html-themes</h4>
<div class="outline-text-4" id="text-8-5-4">
<p>
ORRR last thing that you can try when it comes to styling your website, try
using one of these, <a href="https://github.com/fniessen/org-html-themes">org-html-themes</a>.
</p>

<p>
You can point to one of these themes like such, by placing this code at the top
of your.org file:
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="font-weight: bold; font-style: italic;">#+SETUPFILE: <a href="https://fniessen.github.io/org-html-themes/org/theme-NAME.setup">https://fniessen.github.io/org-html-themes/org/theme-NAME.setup</a></span>
</pre>
</div>

<p>
Or if you have downloaded the code(more future proof solution), add such line
at the top of your .org file.
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="font-weight: bold; font-style: italic;">#+SETUPFILE: PATH/TO/GIT/REPO/org/theme-NAME-local.setup</span>
</pre>
</div>

<p>
Of course we can also modify our <code>setq org-static-blog-page-header</code> to contain
the <code>org-html-themes</code>, but I won't do that this time since I know I will be
using my own custom stylesheet.
</p>
</div>
</div>

<div id="outline-container-org9f70258" class="outline-4">
<h4 id="org9f70258"><span class="section-number-4">8.5.5</span> Note to self</h4>
<div class="outline-text-4" id="text-8-5-5">
<p>
Some css examples here(built with ox-publish though) -
<a href="https://github.com/arvydasg/emacs_blog/blob/master/css/style.css">https://github.com/arvydasg/emacs_blog/blob/master/css/style.css</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org669eaba" class="outline-3">
<h3 id="org669eaba"><span class="section-number-3">8.6</span> Javascript support in HTML export</h3>
<div class="outline-text-3" id="text-8-6">
<p>
Official docs - <a href="https://orgmode.org/manual/JavaScript-support.html">https://orgmode.org/manual/JavaScript-support.html</a>
</p>

<p>
Add the .js files the same way as you would add .css file.
</p>
</div>
</div>

<div id="outline-container-org369565c" class="outline-3">
<h3 id="org369565c"><span class="section-number-3">8.7</span> Images in HTML export</h3>
<div class="outline-text-3" id="text-8-7">
</div>
<div id="outline-container-org9240432" class="outline-4">
<h4 id="org9240432"><span class="section-number-4">8.7.1</span> Display images</h4>
<div class="outline-text-4" id="text-8-7-1">
<p>
NOTE: gif's are not rendered in github pages for some reason (julijaconsulting
and facebook project gif's)
</p>

<p>
Official docs - <a href="https://orgmode.org/manual/Images-in-HTML-export.html">https://orgmode.org/manual/Images-in-HTML-export.html</a>
My docs - <a href="20231126T003746--images-in-org-files__emacs.html">images in org files</a>
</p>
</div>
</div>

<div id="outline-container-orgdfa5377" class="outline-4">
<h4 id="orgdfa5377"><span class="section-number-4">8.7.2</span> One option is to add images as plain html</h4>
<div class="outline-text-4" id="text-8-7-2">
<p>
But then you can not change the size of it in lightbox.
</p>

<figure>
  <img src="./media/Screenshot 2023-11-17 163344 - very quaint.png" alt="1.png" width="300px">
</figure>
</div>
</div>

<div id="outline-container-org5258393" class="outline-4">
<h4 id="org5258393"><span class="section-number-4">8.7.3</span> Another option is to include a link to a file(the usual way)</h4>
<div class="outline-text-4" id="text-8-7-3">
<p>
To toggle the images(show/hide), use <code>org-toggle-inline-images</code>.
</p>


<figure>
<img src="./media/water.jpg" alt="water.jpg" width="1200px">

</figure>

<p>
Okay, so no now we know that we can create a yasnippet for this(I have mine
bound to <code>img</code>) and then I can drop images wherever.
</p>
</div>
</div>

<div id="outline-container-orgd57c7f3" class="outline-4">
<h4 id="orgd57c7f3"><span class="section-number-4">8.7.4</span> Org download package for inserting images in org files</h4>
<div class="outline-text-4" id="text-8-7-4">
<p>
Optional, does not really work if in WSL - <a href="20231219T090909--using-org-download-package-in-wsl__emacs_windows_wsl.html">using org download package in WSL</a>
</p>
</div>
</div>

<div id="outline-container-orgac3efe6" class="outline-4">
<h4 id="orgac3efe6"><span class="section-number-4">8.7.5</span> Add a lightbox effect on the images</h4>
<div class="outline-text-4" id="text-8-7-5">
<p>
Follow - <a href="20231219T091704--add-a-lightbox-effect-for-images-in-html__javascript_websites.html">add a lightbox effect for images in html</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org81363bb" class="outline-3">
<h3 id="org81363bb"><span class="section-number-3">8.8</span> Preamble(nav) and postamble(footer)</h3>
<div class="outline-text-3" id="text-8-8">
<p>
Docs about them -  <a href="https://orgmode.org/manual/HTML-preamble-and-postamble.html">https://orgmode.org/manual/HTML-preamble-and-postamble.html</a>
</p>

<p>
Postamble - <a href="https://taingram.org/blog/org-mode-blog.html">https://taingram.org/blog/org-mode-blog.html</a>
Postamble - nice footer and more? -
<a href="https://ict4g.net/adolfo/notes/emacs/linking-my-html-pages-to-source-code.html">https://ict4g.net/adolfo/notes/emacs/linking-my-html-pages-to-source-code.html</a>
</p>

<p>
Check other <a href="20231214T150411--inspirational-websites__emacs_websites.html">inspirational websites</a> that are build with Emacs for some
inspiration.
</p>

<p>
Then simply modify - :html-preamble and :html-postamble in your config.
</p>
</div>
</div>

<div id="outline-container-org4bf7c23" class="outline-3">
<h3 id="org4bf7c23"><span class="section-number-3">8.9</span> Add a search to the <code>sitemap.org</code></h3>
<div class="outline-text-3" id="text-8-9">
<p>
So my thought was that&#x2026; if I create lots of small files and all of those
small files are listed in one list in <code>sitemap.org</code>, then it will be difficult
to locate the files.. The tags are currently not visible in this list, you only
have to search by keywords that you know. For example you search for Django,
but then you get a search bar with results of 20 entries. Have to go through
each one of them&#x2026; Pain.
</p>

<p>
What if I had a simple search bar in <code>sitemap.org</code> file which would allow me to
filter the list results by the words I write in the search bar?
</p>
</div>

<div id="outline-container-orgf315d57" class="outline-4">
<h4 id="orgf315d57"><span class="section-number-4">8.9.1</span> Print "hello world" first in the sitemap.org</h4>
<div class="outline-text-4" id="text-8-9-1">
<p>
Sounds good, but the problem is that I do not control the behavior of the
<code>sitemap.org</code> generation. At least not originally. But it's emacs, so I can.
</p>

<p>
I see that my build configuration has <code>:sitemap-function</code> option, which is
currently commented out. Perhaps this is the place that is responsible for
creating the <code>sitemap.org</code> file?
</p>

<p>
I go to
<code>/nix/store/jm91p103vzqyvjcgk44ga6r5p5fhj45i-emacs-29.3/share/emacs/29.3/lisp/org</code>
and find <code>ox-publish.el.gz</code> package. In it I see <code>org-publish-sitemap-default</code>
function that looks like this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-publish-sitemap-default</span> (title list)
  <span style="font-style: italic;">"Default site map, as a string.</span>
<span style="font-style: italic;">TITLE is the title of the site map.  LIST is an internal</span>
<span style="font-style: italic;">representation for the files to include, as returned by</span>
<span style="font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-list-to-lisp</span><span style="font-style: italic;">'.  PROJECT is the current project."</span>
  (concat <span style="font-style: italic;">"#+TITLE: "</span> title <span style="font-style: italic;">"\n\n"</span>
          (org-list-to-org list)))
</pre>
</div>

<p>
First I want to simply print "hello world". Let's modify this function like so:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ag-org-publish-sitemap-default</span> (title list)
  <span style="font-style: italic;">"Default site map, as a string.</span>
<span style="font-style: italic;">TITLE is the title of the site map.  LIST is an internal</span>
<span style="font-style: italic;">representation for the files to include, as returned by</span>
<span style="font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-list-to-lisp</span><span style="font-style: italic;">'."</span>
  (concat <span style="font-style: italic;">"#+TITLE: "</span> title <span style="font-style: italic;">"\n\n"</span>
          <span style="font-style: italic;">"* Hello World\n\n"</span>
          (org-list-to-org list)))
</pre>
</div>

<p>
Then in the build config, let's use this function:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold;">:sitemap-function</span> ag-org-publish-sitemap-default
</pre>
</div>

<p>
Build the site.
</p>

<p>
You should see the hello world in the <code>sitemap.org</code>. Great, we have found a way
to control the sitemap!
</p>







<p>
ag-org-publish-sitemap-default
</p>
</div>
</div>

<div id="outline-container-org5ecdc71" class="outline-4">
<h4 id="org5ecdc71"><span class="section-number-4">8.9.2</span> Add the search bar in plain html</h4>
<div class="outline-text-4" id="text-8-9-2">
<blockquote>
<p>
To include an HTML search bar in the <code>sitemap.org</code> file generated by our custom
function, we need to <b><b>embed</b></b> the HTML <b><b>directly into the Org file</b></b>.
Org-mode supports including <b><b>raw HTML</b></b>, which <b><b>will be preserved</b></b> when the
Org file is exported to HTML.
</p>
</blockquote>

<p>
Let's modify our custom function to include the search bar:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ag-org-publish-sitemap-default</span> (title list)
  <span style="font-style: italic;">"Default site map, as a string.</span>
<span style="font-style: italic;">TITLE is the title of the site map.  LIST is an internal</span>
<span style="font-style: italic;">representation for the files to include, as returned by</span>
<span style="font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-list-to-lisp</span><span style="font-style: italic;">'."</span>
  (concat <span style="font-style: italic;">"#+TITLE: "</span> title <span style="font-style: italic;">"\n\n"</span>
          <span style="font-style: italic;">"#+OPTIONS: toc:nil\n\n"</span>   <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Disable the table of contents for better formatting</span>
          <span style="font-style: italic;">"#+BEGIN_EXPORT html\n"</span>
          <span style="font-style: italic;">"&lt;div class=\"search-wrapper\"&gt;\n"</span>
          <span style="font-style: italic;">"&lt;label for=\"search\"&gt;Search&lt;/label&gt;\n"</span>
          <span style="font-style: italic;">"&lt;input type=\"search\" id=\"search\" data-search&gt;\n"</span>
          <span style="font-style: italic;">"&lt;/div&gt;\n"</span>
          <span style="font-style: italic;">"#+END_EXPORT\n\n"</span>
          (org-list-to-org list)))
</pre>
</div>

<p>
Now create a <code>search.js</code> file in <code>static/js</code> folder. Add it in the
<code>html-postamble</code>.
</p>

<p>
Content of the <code>search.js</code>:
</p>

<div class="org-src-container">
<pre class="src src-javascript">  <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">This code waits for the entire HTML document to load before running</span>
document.addEventListener(<span style="font-style: italic;">"DOMContentLoaded"</span>, <span style="font-weight: bold;">function</span>() {
    <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Select all list items (notes) within the unordered list with class "org-ul"</span>
    <span style="font-weight: bold;">const</span> <span style="font-weight: bold; font-style: italic;">allNotes</span> = document.querySelectorAll(<span style="font-style: italic;">".org-ul li"</span>);

    <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Select the search input field with the data attribute "data-search"</span>
    <span style="font-weight: bold;">const</span> <span style="font-weight: bold; font-style: italic;">searchInput</span> = document.querySelector(<span style="font-style: italic;">"[data-search]"</span>);

    <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Add an event listener to the search input field that listens for "input" events</span>
    searchInput.addEventListener(<span style="font-style: italic;">"input"</span>, <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">e</span>) {
        <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Get the current value of the search input field and convert it to lowercase</span>
        <span style="font-weight: bold;">const</span> <span style="font-weight: bold; font-style: italic;">value</span> = e.target.value.toLowerCase();

        <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Loop through each note in the list of notes</span>
        allNotes.forEach(<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">note</span>) {
            <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Get the text content of the note and convert it to lowercase</span>
            <span style="font-weight: bold;">const</span> <span style="font-weight: bold; font-style: italic;">noteText</span> = note.textContent.toLowerCase();

            <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Check if the note's text includes the search input value</span>
            <span style="font-weight: bold;">if</span> (noteText.includes(value)) {
                <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">If it does, display the note</span>
                note.style.display = <span style="font-style: italic;">""</span>;
            } <span style="font-weight: bold;">else</span> {
                <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">If it doesn't, hide the note</span>
                note.style.display = <span style="font-style: italic;">"none"</span>;
            }
        });
    });
});
</pre>
</div>

<p>
Rebuild the site. Search should work.
</p>
</div>
</div>
</div>

<div id="outline-container-orgde632b1" class="outline-3">
<h3 id="orgde632b1"><span class="section-number-3">8.10</span> Extra's</h3>
<div class="outline-text-3" id="text-8-10">
<p>
Extra tips:
</p>
</div>

<div id="outline-container-org7de9eb0" class="outline-4">
<h4 id="org7de9eb0"><span class="section-number-4">8.10.1</span> You can also include other content from other files!</h4>
<div class="outline-text-4" id="text-8-10-1">
<p>
Like such - <a href="https://orgmode.org/manual/Include-Files.html">https://orgmode.org/manual/Include-Files.html</a>
</p>

<p>
I have done this to include recent posts into index.org page.
</p>
</div>
</div>

<div id="outline-container-org7f853c0" class="outline-4">
<h4 id="org7f853c0"><span class="section-number-4">8.10.2</span> Creating a HTML page with my .emacs configuration</h4>
<div class="outline-text-4" id="text-8-10-2">
<p>
Simply made a symlink to my .org configuration file and it renders it together
with the rest of the .org files.
</p>

<div class="org-src-container">
<pre class="src src-bash">[nixos@nixos:~/GIT/devnotes/build]$ ln -s ../../dotfiles/.emacs.d/init.org init.org
</pre>
</div>

<p>
UNFORTUNATELY - if you will chose to deploy to github pages, it will not
understand the symlink, the build will fail with such message:
</p>

<blockquote>
<p>
Error: No such file or directory @ rb_check_realpath_internal - /github/workspace/org/init.org
</p>
</blockquote>

<p>
So I ditched this idea of having a symlink to my init.org. IF I will ever host
this site on another platform - I might try this workaround again.
</p>
</div>
</div>

<div id="outline-container-org89f396d" class="outline-4">
<h4 id="org89f396d"><span class="section-number-4">8.10.3</span> Adding a date to post title in sitemap</h4>
<div class="outline-text-4" id="text-8-10-3">
<p>
Inspiration here - <a href="https://taingram.org/blog/org-mode-blog.html">https://taingram.org/blog/org-mode-blog.html</a>
</p>

<p>
We can customize the entry format with a <code>sitemap-format-entry</code> function. In my
case I wanted to show the date inline with the blog post listings:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ag/org-sitemap-date-entry-format</span> (entry style project)
  <span style="font-style: italic;">"Format ENTRY in org-publish PROJECT Sitemap format ENTRY ENTRY STYLE format that includes date."</span>
  (<span style="font-weight: bold;">let</span> ((filename (org-publish-find-title entry project)))
    (<span style="font-weight: bold;">if</span> (= (length filename) 0)
        (format <span style="font-style: italic;">"*%s*"</span> entry)
      (format <span style="font-style: italic;">"{{{timestamp(%s)}}} [[file:%s][%s]]"</span>
              (format-time-string <span style="font-style: italic;">"%Y-%m-%d"</span>
                                  (org-publish-find-date entry project))
              entry
              filename))))
</pre>
</div>

<p>
Notice above we insert an <a href="https://orgmode.org/manual/Macro-Replacement.html">Org macro</a> called timestamp, it is defined as follows:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-export-global-macros
      '((<span style="font-style: italic;">"timestamp"</span> . <span style="font-style: italic;">"@@html:&lt;span class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span>)))
</pre>
</div>

<p>
We then also must inform <code>org-static-project-alist</code> about this change by using
our custom function in:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold;">:sitemap-format-entry</span> ag/org-sitemap-date-entry-format
</pre>
</div>

<p>
Re-render your .org files.
</p>

<p>
This macro adds some HTML around the timestamp for CSS styling, it has to be
done as a macro as otherwise Org escapes the HTML tags. The results are:
</p>

<p>
#+BEGIN_EXPORT html
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/>
	 <footer>
	 <p class="date generated">This note is <u>first written</u>: 2023-12-15 Fri 18:25</p>
	 <div class="copyright-container generated">
	 <div class="copyright">
	 Copyright &copy; 2023-2024 Arvydas Gasparavicius
	 </div>
	 </div>
	 <!-- Had to comment out this, because of the github actions, read in the docs for more detail -->
	 <!-- <p class="date">This org file is <u>exported</u> to HTML: 2024-06-04 Tue 13:20</p> -->
	 <!-- <p class="date">This org file is last <u>modified</u>: 2024-06-04 Tue 13:19</p> -->
	 <!-- <p class="date">This org file is <u>created</u>: 2023-12-15 Fri 18:25</p> -->
	 <div class="generated">
	Created with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.3) on <a href="https://www.gnu.org">GNU</a>/<a href="https://www.kernel.org/">Linux</a>
	</div>
	</footer>
	 <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
	 <script src="./static/js/generic.js"></script>
	 <script src="./static/js/scroll-to-top.js"></script>
	 <script src="./static/js/lightbox.js"></script>
	 <script src="./static/js/search.js"></script>
</div>
</body>
</html>
