<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-05-29 Wed 10:35 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Building a development notes blog with denote and org-publish Notes</title>
<meta name="author" content="Arvydas Gasparavicius" />
<meta name="description" content="welcome to my site" />
<meta name="keywords" content="emacs antanas geles" />
<meta name="generator" content="Org Mode" />

<link rel="stylesheet" href="./static/css/org-html-style-default.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/generic.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/taingram.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/lightbox.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/scroll-to-top.css" type="text/css"/>
<link rel="icon" href="./static/ag.ico">
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="sitemap.html">NOTES </a>
 
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="preamble" class="status">
<div id="updated">Updated: 2024-05-29 Wed 10:21</div>
</div>
<div id="content" class="content">
<header>
<h1 class="title">Building a development notes blog with denote and org-publish Notes</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orga7ec364">1. QUICK: Generate/update the blog step by step</a></li>
<li><a href="#org21e33ef">2. Research</a>
<ul>
<li><a href="#orgc8ed1d6">2.1. Why build a website for development notes anyway</a></li>
<li><a href="#org0335c62">2.2. Why use emacs for it</a></li>
<li><a href="#org79c80aa">2.3. Choosing an Emacs tool to build such website</a></li>
<li><a href="#org4b05746">2.4. ox-publish VS org-static-blog</a></li>
</ul>
</li>
<li><a href="#orgb5609bd">3. What is <code>ox-publish</code>, folder structure, build code, running build</a>
<ul>
<li><a href="#org164c364">3.1. Get to know to <code>ox-publish</code></a></li>
<li><a href="#org59b886f">3.2. Installation of <code>ox-publish</code></a>
<ul>
<li><a href="#org4c5db59">3.2.1. Install the package</a></li>
<li><a href="#org8ad7014">3.2.2. Decide where to place the configuration</a></li>
</ul>
</li>
<li><a href="#org72c51c7">3.3. Creating .org files to be rendered</a>
<ul>
<li><a href="#org5813c0d">3.3.1. Separate repositories</a></li>
<li><a href="#orgbb95955">3.3.2. Folder structure of source dir</a></li>
<li><a href="#org1fd057f">3.3.3. Creating new notes with Denote</a></li>
</ul>
</li>
<li><a href="#orge13e34b">3.4. <code>ox-publish</code> config file itself</a></li>
<li><a href="#org0c37777">3.5. Running the build (generating the .html files from .org files)</a></li>
<li><a href="#org9dbe0fb">3.6. Previewing the generated site</a>
<ul>
<li><a href="#org614c4ec">3.6.1. Preview the html file in the browser</a></li>
<li><a href="#org5b2c29a">3.6.2. Preview with simple-httpd</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org11cfc1f">4. Publishing the site to the world</a>
<ul>
<li>
<ul>
<li><a href="#org1344b8a">4.0.1. Free method with github</a></li>
<li><a href="#orgb62b277">4.0.2. Possibly non-free with a server(have not tried)</a></li>
<li><a href="#org4e70d78">4.0.3. Automatically publish your pages?(have not tried)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org969eebd">5. Nice to haves</a>
<ul>
<li><a href="#org267c5f7">5.1. Individual files customization options</a></li>
<li><a href="#orgc8a3b92">5.2. Important information about linking between .org files</a></li>
<li><a href="#orgf74b14d">5.3. CSS support in HTML export</a>
<ul>
<li><a href="#org8c15618">5.3.1. Use the default styles from ox-html</a></li>
<li><a href="#org3870f1c">5.3.2. Add custom classes to blocks of text/code</a></li>
<li><a href="#org5bdb5fd">5.3.3. import custom css</a></li>
<li><a href="#org88f714b">5.3.4. org-html-themes</a></li>
<li><a href="#org9dd22e9">5.3.5. Note to self</a></li>
</ul>
</li>
<li><a href="#orgd86992e">5.4. Javascript support in HTML export</a></li>
<li><a href="#orgc58872b">5.5. Images in HTML export</a>
<ul>
<li><a href="#org5d44454">5.5.1. Display images</a></li>
<li><a href="#orgaffb423">5.5.2. One option is to add images as plain html</a></li>
<li><a href="#orgfb66bbb">5.5.3. Another option is to include a link to a file(the usual way)</a></li>
<li><a href="#orgdf00c11">5.5.4. Org download package for inserting images in org files</a></li>
<li><a href="#org8af2e20">5.5.5. Add a lightbox effect on the images</a></li>
</ul>
</li>
<li><a href="#org6d3b4bf">5.6. Preamble(nav) and postamble(footer)</a></li>
<li><a href="#org6a1be9c">5.7. Extra's</a>
<ul>
<li><a href="#org65ea5c3">5.7.1. You can also include other content from other files!</a></li>
<li><a href="#org866c5ae">5.7.2. Creating a HTML page with my .emacs configuration</a></li>
<li><a href="#org74c1dee">5.7.3. Adding a date to post title in sitemap</a></li>
<li><a href="#org6339108">5.7.4. <span class="todo TODO">TODO</span> Linking HTML pages and their org mode sources</a></li>
<li><a href="#org1cfc137">5.7.5. Add scroll to top button</a></li>
<li><a href="#org950ec66">5.7.6. <span class="todo TODO">TODO</span> Adding analytics</a></li>
<li><a href="#orgb35b294">5.7.7. Table of contents at the side - inspiration</a></li>
<li><a href="#org3e92c3e">5.7.8. short and clean links like here</a></li>
<li><a href="#org3448d20">5.7.9. Print out proper underscore</a></li>
<li><a href="#org57af1fd">5.7.10. Tables in HTML export</a></li>
<li><a href="#org111f1b0">5.7.11. Create editable text areas</a></li>
<li><a href="#orge4cebfc">5.7.12. Tags solution</a></li>
<li><a href="#orgc42a46f">5.7.13. presentation mode?</a></li>
<li><a href="#orgd38dc16">5.7.14. search function with agolia like Bozhidar</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>


<div id="outline-container-orga7ec364" class="outline-2">
<h2 id="orga7ec364"><span class="section-number-2">1.</span> QUICK: Generate/update the blog step by step</h2>
<div class="outline-text-2" id="text-1">
<p>
This section basically is a reminder of the steps needed.
</p>

<ul class="org-ul">
<li>Update/create an org file in devnotes directory</li>
<li>Run build command in the terminal to export org to html</li>
<li>Check the .html in the browser, confirm all is good</li>
<li>Commit the org files</li>
<li>Commit ALL html files that have changed during the export (all might change,
have to take into consideration the new file to TOC or somilar)</li>
<li>Publish arvydas.github.io repo changes to see them on <a href="https://arvydas.dev">https://arvydas.dev</a></li>
</ul>

<p>
Please check the in-depth view of how the blog is built
</p>
</div>
</div>

<div id="outline-container-org21e33ef" class="outline-2">
<h2 id="org21e33ef"><span class="section-number-2">2.</span> Research</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgc8ed1d6" class="outline-3">
<h3 id="orgc8ed1d6"><span class="section-number-3">2.1.</span> Why build a website for development notes anyway</h3>
<div class="outline-text-3" id="text-2-1">
<p>
I have a lot of notes. Over a few systems(at home, at work, under descriptions
of various projects).
</p>

<p>
So I wanted to gather everything in one place and somehow link them together.
It is also nice if I can share that with others. Also, as of <span class="timestamp-wrapper"><span class="timestamp">[2023-12-16 Sat]</span></span>,
having everything about you/your way of working, etc written in one place, is a
perfect for AI systems to grab. All in one place, no need to scrape the whole
Internet. So the AI will for sure know how I like to work and my weak
spots(what I usually write here is what I just learned or don't want to
forget).
</p>

<p>
Also, of my notes are in .org files written in emacs, so of course my website
will also be written in Emacs
</p>

<p>
There are also many <a href="20231214T150411--inspirational-websites__emacs_websites.html">inspirational websites</a> that look nice, are clean and
simple, but not necessarily do the purpose of "development notes storage".
Unless maybe this one - <a href="http://tips.defun.work/">http://tips.defun.work/</a>, which is also my initial
inspiration.
</p>

<p>
Have your devnotes reachable anywhere + be able to share them with others(in a
readable html format in a form of a blog). I am in.
</p>
</div>
</div>

<div id="outline-container-org0335c62" class="outline-3">
<h3 id="org0335c62"><span class="section-number-3">2.2.</span> Why use emacs for it</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<a href="20231215T140448--why-build-a-website-with-emacs-and-not-with-something-else__emacs_websites.html">Why build a website with emacs and not with something else</a>
</p>
</div>
</div>

<div id="outline-container-org79c80aa" class="outline-3">
<h3 id="org79c80aa"><span class="section-number-3">2.3.</span> Choosing an Emacs tool to build such website</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Emacs has both built in and external packages that help you to generate .html
files from .org note files.
</p>

<p>
Some of them are:
</p>

<ul class="org-ul">
<li>org-export-dispatcher(export one file at a time) <a href="https://github.com/arvydasg/codeacademy">Codeacademy example</a></li>
<li>ox-publish(alist, export all pages of a project) (<a href="https://github.com/arvydasg/org-publish-project-blog">ox-publish</a>, <a href="https://github.com/arvydasg/emacs_blog/tree/master">emacs blog</a>,
<a href="https://github.com/arvydasg/PKC_AFK/blob/main/AFK/src/pkcwiki/pkc-mano-build-site.el">pkcwiki</a>, <a href="https://github.com/arvydasg/pkc_wiki">pkcwiki2</a>, <a href="20231217T064942--build-a-website-with-emacs-and-ox-publish__emacs_websites.html">my notes about ox-publish</a>)</li>
<li><a href="20231215T101410--create-a-blog-with-emacs-easy-hugo__emacs_hugo_websites.html">create a blog with emacs-easy-hugo</a></li>
<li><a href="20231215T203400--create-a-website-with-ox-hugo__emacs_hugo_websites.html">create a website with ox hugo</a></li>
<li>org-static-blog, <a href="https://github.com/arvydasg/org-static-blog">example</a></li>
</ul>
</div>
</div>

<div id="outline-container-org4b05746" class="outline-3">
<h3 id="org4b05746"><span class="section-number-3">2.4.</span> ox-publish VS org-static-blog</h3>
<div class="outline-text-3" id="text-2-4">
<p>
At first(<span class="timestamp-wrapper"><span class="timestamp">[2023-12-15 Fri]</span></span>) I was thinking to write the website with
<code>org-static-blog</code>, almost had the blog setup and ready, converted around 50
pages to html already, displayed them under my domain. But then kept seeing
some features that ox-publish has and org-static-blog does not. Thought okay,
let's rethink that. Asked ChatGPT for help:
</p>

<blockquote>
<p>
The choice between using the default ox-publish functionality in Org Mode or
the org-static-blog package to create your Emacs website depends on your
specific requirements and preferences. Let's explore both options:
</p>

<p>
<b>ox-publish in Org Mode</b>:
</p>

<p>
<code>Pros</code>:
</p>

<p>
Flexibility: ox-publish is part of Org Mode and provides considerable
flexibility in customizing your website. You can define various publishing
options, including different output formats and configurations.
</p>

<p>
Integration: It seamlessly integrates with Org Mode, making it easy to manage
content directly within Emacs.
</p>

<p>
Customization: Allows extensive customization using Emacs Lisp, enabling you to
tailor your website to your preferences.
</p>

<p>
<code>Cons</code>:
</p>

<p>
Steep Learning Curve: Setting up and configuring ox-publish might have a
learning curve, especially if you're new to Emacs Lisp and detailed
configuration.
</p>

<p>
<b>org-static-blog Package</b>:
</p>

<p>
<code>Pros</code>:
</p>

<p>
Simplicity: org-static-blog is designed specifically for creating simple blogs
or websites using Org Mode. It's relatively straightforward to set up and use,
making it ideal if you want a quick solution.
</p>

<p>
Minimal Configuration: It requires minimal configuration, making it accessible
for beginners.
</p>

<p>
Focused Purpose: Primarily built for blogs, it might suit your needs if you're
looking for a straightforward blogging platform within Emacs.
</p>

<p>
<code>Cons</code>:
</p>

<p>
Limited Features: It might lack certain advanced features or customization
options compared to ox-publish, especially if you need more complex
functionality.
</p>

<p>
Less Flexible: As it's tailored for static blogs, if your website needs evolve
beyond blogging, you might face limitations.
</p>

<p>
<b>Decision Factors</b>:
</p>

<p>
Complexity vs. Simplicity: Consider how complex or simple you want your website
setup to be.
</p>

<p>
Customization Needs: Evaluate how much flexibility and customization options
you require for your website.
</p>

<p>
Future Growth: Consider whether your website's needs might expand beyond a blog
and if you need features beyond what a blogging-centric package provides.
</p>

<p>
Familiarity with Emacs Lisp: Assess your comfort level with Emacs Lisp, as
ox-publish might require more familiarity.
</p>

<p>
<b>Recommendation</b>:
</p>

<p>
If you prioritize simplicity, quick setup, and your website's focus is
primarily a blog, org-static-blog could be a good starting point.
</p>

<p>
If you foresee needing extensive customization, flexibility, or plan for
features beyond a blog, investing time in learning and using ox-publish might
be more beneficial in the long run.
</p>

<p>
Experiment with both to understand their functionalities and how they align
with your specific website goals. You can start with org-static-blog for a
quick setup and later explore ox-publish for more intricate customization and
flexibility if needed.
</p>
</blockquote>

<p>
These were my thoughts AFTER I have read the ChatGPT response:
</p>

<blockquote>
<p>

</p>

<p>
Of course after reading this I leaned toward <code>ox-publish</code> instead of
org-static-blog. True, I have noticed that it lacks configuration options and
is kind of restraining. I read other people's tutorials on how they use
ox-publish and all the settings they have and I can not try to reuse them with
org-static-blog. Not nice..
</p>

<p>
Also there is this issue that I am facing today(re renders each post). -
<a href="https://github.com/bastibe/org-static-blog/issues/126">https://github.com/bastibe/org-static-blog/issues/126</a>
</p>

<p>
I just hope that tag feature works in ox-publish(it should) - then I am all
good. Let's dive in.
</p>
</blockquote>

<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-12-16 Sat] </span></span> Unfortunately, the tags don't work in ox-publish way of making
a website, so I will have to stick with org-static-blog. Not complaining. It
will force me to read thought the source code more often and and see how I can
use pieces of ox-publish in org-static-blog configuration.
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-12-19 Tue] </span></span> The issue I have mentioned above still bugs me. I can use tags in my website,
BUT I can not compile it from the comfortable place of a custom script(instead
of having the config in my main config), it is not native Emacs, stuff is built
on top of it.. I once again decided to switch my mind and build my website with
built in tools - <a href="20231217T064942--build-a-website-with-emacs-and-ox-publish__emacs_websites.html">Build a website with emacs and ox-publish</a>. I will have ALL the
features of org mode and standard publishing tools, exports will be clean, I
will also be able to have multiple configs for each blog/website and. I will
simply not have the tags.. which I will build on top by myself with the
inspiration of =org-static-blog=(someday in the future). The notes will not be
rendered into html that often, they won't be categorized by tags, but that's
not a big deal. Primary audience for these notes is still - me. I need to be
able to search through them and find the information in them. If it's not as
easy to do that on the web - so be it. I will work on that later.
</p>
</div>
</div>
</div>

<div id="outline-container-orgb5609bd" class="outline-2">
<h2 id="orgb5609bd"><span class="section-number-2">3.</span> What is <code>ox-publish</code>, folder structure, build code, running build</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org164c364" class="outline-3">
<h3 id="org164c364"><span class="section-number-3">3.1.</span> Get to know to <code>ox-publish</code></h3>
<div class="outline-text-3" id="text-3-1">
<p>
First things first of course:
</p>

<ul class="org-ul">
<li>Publishing Org-mode files to HTML - <a href="https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html">https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html</a></li>
<li>HTML specific export settings - <a href="https://orgmode.org/manual/HTML-Export.html#HTML-export">https://orgmode.org/manual/HTML-Export.html#HTML-export</a></li>
<li>My personal notes about building websites with <code>ox-publish</code> - <a href="20231217T064942--build-a-website-with-emacs-and-ox-publish__emacs_websites.html">Build a website
with emacs and ox-publish</a></li>
<li><p>
I recommend to get to know to the source code if you like:
</p>
<div class="org-src-container">
<pre class="src src-bash">/org/ox-html.el.gz
/org/ox-publish.el.gz
</pre>
</div></li>
<li><code>C-c C-e #</code> (org-export-dispatch) plus "template" - ALL possible in-file options</li>
<li><code>org-html-preamble-format</code> some useful %a %c %T functions</li>
</ul>
</div>
</div>

<div id="outline-container-org59b886f" class="outline-3">
<h3 id="org59b886f"><span class="section-number-3">3.2.</span> Installation of <code>ox-publish</code></h3>
<div class="outline-text-3" id="text-3-2">
</div>
<div id="outline-container-org4c5db59" class="outline-4">
<h4 id="org4c5db59"><span class="section-number-4">3.2.1.</span> Install the package</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
It is already installed with Emacs by default.
</p>
</div>
</div>

<div id="outline-container-org8ad7014" class="outline-4">
<h4 id="org8ad7014"><span class="section-number-4">3.2.2.</span> Decide where to place the configuration</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
Ox-publish configuration might get large if you start modifying the head,
preamble, postamble.. Also if you have multiple blogs/websites that you want to
publish this way, you need to have two separate configurations.
</p>

<p>
Eventually you realize that you can't store multiple configurations in your
emacs config file.
</p>

<p>
So the solution to this is to create a "build" folder and in it have such
files:
</p>

<div class="org-src-container">
<pre class="src src-bash">devnotes/build/
├── build.sh
└── build-site.el
</pre>
</div>

<p>
build.sh should be made to be executable <code>chmo o+x build.sh</code> and it's contents
are:
</p>
<div class="org-src-container">
<pre class="src src-bash">#!/bin/sh
emacs -Q --script build-site.el
</pre>
</div>

<p>
and <code>build-site.el</code> content would contain your ox-publish configuration(we will
remove the configuration from our emacs config and place it in this file with a
couple of additions).
</p>

<p>
That's it. Now when we will run the bash script (<code>./build.sh</code>), it will fetch
the dependencies into the /build directory. It will then do the html conversion
from org files as you have specified and at the end it will print out "Build
complete!"
</p>
</div>
</div>
</div>

<div id="outline-container-org72c51c7" class="outline-3">
<h3 id="org72c51c7"><span class="section-number-3">3.3.</span> Creating .org files to be rendered</h3>
<div class="outline-text-3" id="text-3-3">
</div>
<div id="outline-container-org5813c0d" class="outline-4">
<h4 id="org5813c0d"><span class="section-number-4">3.3.1.</span> Separate repositories</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
We have one dir/repo for source files, another for exported html files. Having
them in separate repos allows us to use ripgrep search easier, allows us to use
<code>project.el</code> simpler, not seeing duplicates of files(one .org, one .html). We
can version control the changes of the .org files as well as html files
separately.
</p>

<div class="org-src-container">
<pre class="src src-bash">/home/nixos/GIT:
drwxr-xr-x 6 nixos users   4096 May 27 15:42 .
drwx------ 6 nixos users   4096 May 27 15:44 ..
drwxr-xr-x 5 nixos users  20480 May 28 15:28 arvydasg.github.io # html files lie here
drwxr-xr-x 6 nixos users  20480 May 28 15:30 devnotes # source .org (could be other type) files lie here
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbb95955" class="outline-4">
<h4 id="orgbb95955"><span class="section-number-4">3.3.2.</span> Folder structure of source dir</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
When we have at least one .org file in the source directory, we can think about
exporting it to .html.
</p>

<p>
Structure of devnotes folder, an example:
</p>

<div class="org-src-container">
<pre class="src src-bash">/home/nixos/GIT/devnotes:
drwxr-xr-x 6 nixos users 20480 May 28 15:35 .
drwxr-xr-x 6 nixos users  4096 May 27 15:42 ..
drwxr-xr-x 2 nixos users  4096 May 28 13:59 build # folder in which the build script lives
drwxr-xr-x 8 nixos users  4096 May 28 15:36 .git  # git folder
drwxr-xr-x 3 nixos users  4096 May 27 15:00 media # images folder
drwxr-xr-x 4 nixos users  4096 May 27 15:00 static # css/js/ico folder
-rw-r--r-- 1 nixos users  1404 May 27 16:30 20231125T235251--api-tools__api.org # denote file
-rw-r--r-- 1 nixos users   646 May 27 15:00 20231126T001334--raspberrypi-first-setup__raspberrypi.org # denote file
-rw-r--r-- 1 nixos users   790 May 27 15:00 20231126T001417--magic-mirror-setup__raspberrypi.org # denote file
-rw-r--r-- 1 nixos users   324 May 27 15:00 20231126T001642--raspberrypi-pins__raspberrypi.org # denote file
  -rw-r--r-- 1 nixos users   225 May 27 15:00 contact.org # simple page that 
-rw-r--r-- 1 nixos users   164 May 27 15:00 .dir-locals.el # read "denote features" page for explanation to this, has no influence to blog
-rw-r--r-- 1 nixos users   800 May 27 15:00 freelancing.org # random page
-rw-r--r-- 1 nixos users   814 May 27 15:00 index.org # index(front) page of the website
-rw-r--r-- 1 nixos users  1505 May 27 15:00 projects.org # custom list of projects, created the links myself
-rw-r--r-- 1 nixos users    36 May 27 15:00 readme.md
-rw-r--r-- 1 nixos users 23584 May 28 15:28 sitemap.org # automatically generated sitemap
-rw-r--r-- 1 nixos users   817 May 28 15:06 statusupdates.org # random page
-rw-r--r-- 1 nixos users  2728 May 27 15:00 uses.org # random page
</pre>
</div>
</div>
</div>

<div id="outline-container-org1fd057f" class="outline-4">
<h4 id="org1fd057f"><span class="section-number-4">3.3.3.</span> Creating new notes with Denote</h4>
<div class="outline-text-4" id="text-3-3-3">
<p>
I am using Denote package, so I can use it's functionality to create a new
entry. Here are some <a href="20231125T212326--denote-features__emacs.html">denote features</a>.
</p>

<p>
I use Denote for my personal note taking, now I will also use it for
development note taking. Win win.
</p>
</div>
</div>
</div>

<div id="outline-container-orge13e34b" class="outline-3">
<h3 id="orge13e34b"><span class="section-number-3">3.4.</span> <code>ox-publish</code> config file itself</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Now since we have this list of files and folders, we are ready to export them to .html.
</p>

<p>
For that we will need the <code>build script</code>. It's is a single file in which we
describe HOW we want our build configuration to look like.
</p>

<p>
There are many options available. I have written ALL of them (don't get
intimidated by that) so I know what is available. It's better to know what is
available than not to know :)
</p>

<p>
So here is the build script:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(require 'ox-publish)

;; run this with 'emacs -Q --script build-site.el' command

(setq org-publish-project-alist
      '(
        ("notes"
         :base-directory "../"
         :base-extension "org"
         :publishing-directory "../../arvydasg.github.io"
         :recursive t
         ;; use :noexport: tag if you want headings that have it not to be exported
         ;; :exclude
         ;; :include
         :publishing-function org-html-publish-to-html ;converts org files to HTML
         ;; :preparation-function
         ;; :completion-function
         ;; -----------------------------------------------------------------------------------
         ;; the DETAILS: options set within the individual .org file can
         ;; override all of the settings below:
         ;; you can specify majority the options that you see below in each
         ;; individual file. Find out syntax for it in =C-h v
         ;; org-publish-project-alist= and choose the configuration you want to
         ;; see the syntax for.
         :author "Arvydas Gasparavicius"
         ;; :creator
         :email "arvydas.gaspa@gmail.com"
         ;; :exclude-tags "noexport"
         :headline-levels 3
         :language "en"
         :preserve-breaks nil
         :section-numbers t
         ;; :select-tags
         :time-stamp-file t
         ;; :with-archived-trees
         :with-author t
         :with-creator t
         :with-date t			;date from the filename?
         ;; :with-drawers
         :with-email t
         :with-emphasize t
         :with-entities t
         :with-fixed-width t
         :with-footnotes t
         :with-inlinetasks t
         :with-latex t
         :with-planning t
         :with-priority t
         :with-properties t
         ;; :with-smart-quotes
         :with-special-strings t
         :with-statistics-cookies' t
         :with-sub-superscript nil
         :with-toc t
         :with-tables t
         :with-tags t
         :with-tasks t
         :with-timestamps t
         :with-title t
         :with-todo-keywords t
         ;; kita dalis
         :auto-sitemap t
         :sitemap-filename "sitemap.org"
         :sitemap-title "Notes"
         :sitemap-style tree
         :sitemap-format-entry ag/org-sitemap-date-entry-format
         ;; :sitemap-function
         ;; :sitemap-sort-folders
         :sitemap-sort-files anti-chronologically
         ;; :sitemap-ignore-case
         ;; :makeindex
         ;; :body-only t
         ;; -----------------------------------------------------------------------------------
         ;; ox-html.el.gz

         :html-doctype "html5"
         :html-container "div"
         :html-content-class "content"
         :description "welcome to my site"
         :keywords "emacs antanas geles"
         :html-html5-fancy t
         ;; :html-link-use-abs-url
         ;; :html-link-home "sitemap.html"
         :html-link-home "index.html"
         :html-link-up "sitemap.html"
         ;; :html-mathjax
         ;; :html-equation-reference-format
         ;; :html-postamble nil
         ;; :html-postamble auto		;with-author/email/creator/date
         ;; :html-postamble t               ;from :html-postamble-format
         :html-postamble "&lt;hr/&gt;
         &lt;footer&gt;
         &lt;div class=\"copyright-container\"&gt;
         &lt;div class=\"copyright\"&gt;
         Copyright &amp;copy; 2023-2024 Arvydas Gasparavicius
         &lt;/div&gt;
         &lt;/div&gt;
         &lt;p class=\"date\"&gt;This org file is &lt;u&gt;exported&lt;/u&gt; to HTML: %T&lt;/p&gt;
         &lt;p class=\"date\"&gt;This org file is last &lt;u&gt;modified&lt;/u&gt;: %C&lt;/p&gt;
         &lt;p class=\"date\"&gt;This org file is &lt;u&gt;created&lt;/u&gt;: %d&lt;/p&gt;
         &lt;div class=\"generated\"&gt;
        Created with %c on &lt;a href=\"https://www.gnu.org\"&gt;GNU&lt;/a&gt;/&lt;a href=\"https://www.kernel.org/\"&gt;Linux&lt;/a&gt;
        &lt;/div&gt;
        &lt;/footer&gt;
         &lt;button onclick=\"topFunction()\" id=\"myBtn\" title=\"Go to top\"&gt;Top&lt;/button&gt;
         &lt;script src=\"./static/js/generic.js\"&gt;&lt;/script&gt;
         &lt;script src=\"./static/js/scroll-to-top.js\"&gt;&lt;/script&gt;
         &lt;script src=\"./static/js/lightbox.js\"&gt;&lt;/script&gt;
         &lt;script src=\"./static/js/test.js\"&gt;&lt;/script&gt;"
         ;; :html-preamble t                 ;insert a default one, which in none
         :html-preamble  "&lt;div id=\"updated\"&gt;Updated: %C&lt;/div&gt;"
         ;; :html-head
         :html-head "
&lt;link rel=\"stylesheet\" href=\"./static/css/org-html-style-default.css\" type=\"text/css\"/&gt;
&lt;link rel=\"stylesheet\" href=\"./static/css/generic.css\" type=\"text/css\"/&gt;
&lt;link rel=\"stylesheet\" href=\"./static/css/taingram.css\" type=\"text/css\"/&gt;
&lt;link rel=\"stylesheet\" href=\"./static/css/lightbox.css\" type=\"text/css\"/&gt;
&lt;link rel=\"stylesheet\" href=\"./static/css/scroll-to-top.css\" type=\"text/css\"/&gt;
&lt;link rel=\"icon\" href=\"./static/ag.ico\"&gt;
"
         ;; :html-head-extra "&lt;link rel=\"stylesheet\" href=\"https://arvydas.dev/static/style.css\" type=\"text/css\"/&gt;"
         ;; :html-head-extra "&lt;link rel=\"stylesheet\" href=\"./static/style.css\" type=\"text/css\"/&gt;"
         ;; :subtitle "this is a subtitle"
         :html-head-include-default-style nil         ;turning them off, but adding in a separate file called org-html-style-default.css
         :html-head-include-scripts nil
         :html-allow-name-attribute-in-anchors nil
         :html-divs ((preamble "div" "preamble")
                     (content "div" "content")
                     (postamble "div" "postamble"))
         ;; :html-checkbox-type
         :html-extension "html"
         :html-footnote-format "&lt;sup&gt;%s&lt;/sup&gt;"
         :html-footnote-separator "&lt;sup&gt;, &lt;/sup&gt;"
         :html-footnotes-section "&lt;div id=\"footnotes\"&gt;\n&lt;h2 class=\"footnotes\"&gt;%s: &lt;/h2&gt;\n&lt;div id=\"text-footnotes\"&gt;\n%s\n&lt;/div&gt;\n&lt;/div&gt;"
         ;; :html-format-drawer-function
         ;; :html-format-headline-function
         ;; :html-format-inlinetask-function
         :html-home/up-format "&lt;div id=\"org-div-home-and-up\"&gt;\n &lt;a accesskey=\"h\" href=\"%s\"&gt;NOTES &lt;/a&gt;\n \n &lt;a accesskey=\"H\" href=\"%s\"&gt; HOME &lt;/a&gt;\n&lt;/div&gt;"
         :html-indent nil
         ;; :html-infojs-options
         ;; :html-infojs-template
         ;; :html-inline-image-rules
         :html-link-org-files-as-html t
         ;; :html-mathjax-options
         ;; :html-mathjax-template
         :html-metadata-timestamp-format "%Y-%m-%d %a %H:%M"
         ;; :html-postamble-format
         ;; :html-preamble-format
         ;; :html-prefer-user-labels nil
         :html-self-link-headlines nil
         :html-table-align-individual-fields t
         ;; :html-table-caption-above t
         :html-table-data-tags ("&lt;td%s&gt;" . "&lt;/td&gt;")
         :html-table-header-tags ("&lt;th scope=\"%s\"%s&gt;" . "&lt;/th&gt;")
         :html-table-use-header-tags-for-first-column nil
         :html-tag-class-prefix "gaid"
         :html-text-markup-alist ((bold . "&lt;b&gt;%s&lt;/b&gt;")
                                  (code . "&lt;code&gt;%s&lt;/code&gt;")
                                  (italic . "&lt;i&gt;%s&lt;/i&gt;")
                                  (strike-through . "&lt;del&gt;%s&lt;/del&gt;")
                                  (underline . "&lt;span class=\"underline\"&gt;%s&lt;/span&gt;")
                                  (verbatim .  "&lt;code&gt;%s&lt;/code&gt;"))
         :html-todo-kwd-class-prefix ""
         :html-toplevel-hlevel 2
         ;; :html-use-infojs
         :html-validation-link nil
         ;; :html-validation-link "&lt;a href=\"https://validator.w3.org/check?uri=referer\"&gt;Validate&lt;/a&gt;"
         :html-viewport  ((width "device-width")
                          (initial-scale "1")
                          (minimum-scale "")
                          (maximum-scale "")
                          (user-scalable ""))
         :html-inline-images t
         :html-table-attributes (:border "2" :cellspacing "0" :cellpadding "6" :rules "groups" :frame "hsides")
         :html-table-row-open-tag "&lt;tr&gt;"
         :html-table-row-close-tag "&lt;/tr&gt;"
         :html-xml-declaration (("html" . "&lt;?xml version=\"1.0\" encoding=\"%s\"?&gt;")
                                ("php" . "&lt;?php echo \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"%s\\\" ?&gt;\"; ?&gt;"))
         :html-wrap-src-lines nil
         :html-klipsify-src nil		;making it to t - jupyterhub like code blocks. Insane!
         ;; :html-klipse-css
         ;; :html-klipse-js
         ;; :html-klipse-selection-script
         ;; :infojs-opt
         ;; :creator
         :with-latex t
         ;; :latex-header
         )

        ("static"
         :base-directory "../static"
         :publishing-directory "../../arvydasg.github.io/static"
         :base-extension "css\\|js\\|ico\\|svg"
         :recursive t
         :publishing-function org-publish-attachment ;copies the files verbatim
         )

        ("media"
         :base-directory "../media"
         :publishing-directory "../../arvydasg.github.io/media"
         :base-extension "png\\|jpg\\|jpeg\\|pdf"
         :recursive t
         :publishing-function org-publish-attachment ;copies the files verbatim
         )

        ("build-site.el" :components ("notes" "static" "media"))))

(defun ag/org-sitemap-date-entry-format (entry style project)
  "Format ENTRY in org-publish PROJECT Sitemap format ENTRY ENTRY
 STYLE format that includes date."
  (let ((filename (org-publish-find-title entry project)))
    (if (= (length filename) 0)
        (format "*%s*" entry)
      (format "{{{timestamp(%s)}}} [[file:%s][%s]]"
              (format-time-string "%Y-%m-%d"
                                  (org-publish-find-date entry project))
              entry
              filename))))

(setq org-export-global-macros
      '(("timestamp" . "@@html:&lt;span class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@")))

;; publish all the projects described in this file :components part
(org-publish-all t)

;; publish only specific project
;; The t parameter tells it to regenerate all ;; files regardless of when they
;; were last generated)so no need to add the ;; force prefix with C-c C-e C-f
(org-publish "my-org-site" t)

(message "Build complete!")
</pre>
</div>

<p>
You can see everything in it&#x2026; How I specify directories, how I name the
author, what is my nav(preamble), what is my footer (postamble), how I added
css files, how I added js files, how I added a theme, how I created folders for
images and css/js files, etc&#x2026;.
</p>
</div>
</div>

<div id="outline-container-org0c37777" class="outline-3">
<h3 id="org0c37777"><span class="section-number-3">3.5.</span> Running the build (generating the .html files from .org files)</h3>
<div class="outline-text-3" id="text-3-5">
<p>
After you have studied the config file and you understand what's happening, we
can now launch this script while in <code>/home/nixos/GIT/devnotes/build</code>. Write
<code>./build.sh</code> in shell and it will run the exportation.
</p>

<p>
<code>./build.sh</code> is basically creates a "naked" emacs instance which runs our
configuration file:
</p>

<div class="org-src-container">
<pre class="src src-bash">#!/bin/sh
emacs -Q --script build-site.el
</pre>
</div>

<p>
After the export - check the html file folder, you should see the html files
generated as you like. Open them in the browser to check. Commit if happy,
modify the build script if not happy.
</p>
</div>
</div>

<div id="outline-container-org9dbe0fb" class="outline-3">
<h3 id="org9dbe0fb"><span class="section-number-3">3.6.</span> Previewing the generated site</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Now that we have a few .org file notes in our directory and we have exported
them into html, we can preview them. Open the .html file and it will open in
the browser.
</p>
</div>

<div id="outline-container-org614c4ec" class="outline-4">
<h4 id="org614c4ec"><span class="section-number-4">3.6.1.</span> Preview the html file in the browser</h4>
<div class="outline-text-4" id="text-3-6-1">
<p>
If the file on my wsl lies here:
</p>

<p>
<a href="file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/index.html">file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/index.html</a>, I would
open the whole html directory instead of a single file
(<a href="file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/">file://wsl.localhost/NixOS/home/nixos/GIT/devnotes/html/</a>) to preview the
contents of it in the browser. This allows me to quickly open the files that I
want and see what has changed.
</p>

<p>
how to implement - here
<a href="https://systemcrafters.net/publishing-websites-with-org-mode/building-the-site/">https://systemcrafters.net/publishing-websites-with-org-mode/building-the-site/</a>
</p>
</div>
</div>

<div id="outline-container-org5b2c29a" class="outline-4">
<h4 id="org5b2c29a"><span class="section-number-4">3.6.2.</span> Preview with simple-httpd</h4>
<div class="outline-text-4" id="text-3-6-2">
<p>
Or you can use <code>simple-httpd</code>. It's a package that can host your files as a
website on your local machine so that you can pull it up in your browser.
</p>

<p>
You can install simple-httpd from MELPA using M-x package-install or by putting
the following snippet in your Emacs configuration if you have use-package
installed and MELPA configured as a package source(install it globally in your
emacs config, not in build-site.el file):
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package simple-httpd
  :ensure t)
</pre>
</div>

<p>
Now you can run M-x httpd-serve-directory. It will prompt you for a directory
to serve from within Emacs.
</p>

<p>
Select the path of your public/ directory and then open your browser to
<a href="http://localhost:8080">http://localhost:8080</a> to see the preview of your site! Set httpd-port to change
the default port if necessary.
</p>

<p>
Any time you regenerate the site files, you can just reload the page to see the
result of changes you made! (if you need to do a refresh, then it's the same as
opening in the browser&#x2026;). That's why I don't bother with simple-httpd.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org11cfc1f" class="outline-2">
<h2 id="org11cfc1f"><span class="section-number-2">4.</span> Publishing the site to the world</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1344b8a" class="outline-4">
<h4 id="org1344b8a"><span class="section-number-4">4.0.1.</span> Free method with github</h4>
<div class="outline-text-4" id="text-4-0-1">
<p>
First, Github pages - <a href="20231212T123552--deploy-a-static-website-with-github-pages__git_websites.html">deploy a static website with github pages</a>
</p>

<p>
Second, custom domain name - <a href="20231214T094426--setup-custom-domain-for-github-pages__git_websites.html">setup custom domain for github pages</a>
</p>
</div>
</div>

<div id="outline-container-orgb62b277" class="outline-4">
<h4 id="orgb62b277"><span class="section-number-4">4.0.2.</span> Possibly non-free with a server(have not tried)</h4>
<div class="outline-text-4" id="text-4-0-2">
<p>
Also possible to server your html files over apache. And then simply push your
them over tramp with rsync - <a href="https://taingram.org/blog/org-mode-blog.html">https://taingram.org/blog/org-mode-blog.html</a>
</p>
</div>
</div>

<div id="outline-container-org4e70d78" class="outline-4">
<h4 id="org4e70d78"><span class="section-number-4">4.0.3.</span> Automatically publish your pages?(have not tried)</h4>
<div class="outline-text-4" id="text-4-0-3">
<p>
Automatically like so - <a href="https://ravi.pro/blog/blogging-with-emacs-org-mode.html">https://ravi.pro/blog/blogging-with-emacs-org-mode.html</a>
</p>

<p>
Or like so - <a href="https://systemcrafters.net/publishing-websites-with-org-mode/automated-site-publishing/">https://systemcrafters.net/publishing-websites-with-org-mode/automated-site-publishing/</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org969eebd" class="outline-2">
<h2 id="org969eebd"><span class="section-number-2">5.</span> Nice to haves</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org267c5f7" class="outline-3">
<h3 id="org267c5f7"><span class="section-number-3">5.1.</span> Individual files customization options</h3>
<div class="outline-text-3" id="text-5-1">
<p>
We are specifying all the configuration in the <code>build-site.el</code> file, however,
you can still make some changes to the individual files.
</p>

<p>
Check like it's done in <code>index.html</code>
</p>

<p>
Here are the things you can modify:
</p>

<div class="org-src-container">
<pre class="src src-org">#+title: Freelancing
#+date: &lt;2020-01-01 Sun 01:01&gt;
#+description:
#+filetags:
#+OPTIONS: toc:nil
#+OPTIONS: num:nil
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc8a3b92" class="outline-3">
<h3 id="orgc8a3b92"><span class="section-number-3">5.2.</span> Important information about linking between .org files</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Github link to issue - <a href="https://github.com/protesilaos/denote/issues/369">https://github.com/protesilaos/denote/issues/369</a> 
</p>

<p>
As of <span class="timestamp-wrapper"><span class="timestamp">[2023-12-17 Sun] </span></span> denote links do not work with exporting to html. Talked
with Prot about it, there is no fix for it now. So what I do now is I create
file links(C-c C-l file: &lt;and your filename&gt;) instead of denote links, these do
work. Also, if you get a link wrong and it is not possible to render it, the
compilation of html pages will break. That's good, because by checking the logs
you will see the broken link and can fix it. If you don't want the compilation
to stop, you can add this in your config:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-export-with-broken-links 'mark)
</pre>
</div>

<p>
You will simply see this in your html page(I prefer to know that there are
broken links during the html compilation, so I don't put the code above in my config).
</p>

<blockquote>
<p>
[BROKEN LINK: denote:20231125T212326]
</p>
</blockquote>

<p>
Naming the links:
</p>

<p>
Example taken from here - <a href="https://orgmode.org/manual/Links-in-HTML-export.html">https://orgmode.org/manual/Links-in-HTML-export.html</a>
</p>

<div class="org-src-container">
<pre class="src src-org">#+ATTR_HTML: :title The Org mode website :style color:red;
[[https://orgmode.org]]
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf74b14d" class="outline-3">
<h3 id="orgf74b14d"><span class="section-number-3">5.3.</span> CSS support in HTML export</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Official docs for css support in HTML export - <a href="https://orgmode.org/manual/CSS-support.html">https://orgmode.org/manual/CSS-support.html</a>
</p>

<p>
There are a few options when it comes to custom CSS on your website generated
with Emacs.
</p>
</div>

<div id="outline-container-org8c15618" class="outline-4">
<h4 id="org8c15618"><span class="section-number-4">5.3.1.</span> Use the default styles from ox-html</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
You have to do nothing, <code>ox-html</code> - <code>org-html-style-default</code> got you covered.
And it looks pretty good already by default.
</p>

<p>
But you can do like I did, went to <code>org-html-style-default</code> and copied the CSS
from there, placed in my own stylesheet. I can customize the look myself now a
little. Don't have to rewrite everything - just the parts that I want.
</p>

<p>
Also it's good to have the default styles as a reference close to me rather
than somewhere deep in the emacs docs.
</p>
</div>
</div>

<div id="outline-container-org3870f1c" class="outline-4">
<h4 id="org3870f1c"><span class="section-number-4">5.3.2.</span> Add custom classes to blocks of text/code</h4>
<div class="outline-text-4" id="text-5-3-2">
<p>
<a href="https://orgmode.org/manual/HTML-doctypes.html">https://orgmode.org/manual/HTML-doctypes.html</a>
</p>
</div>
</div>

<div id="outline-container-org5bdb5fd" class="outline-4">
<h4 id="org5bdb5fd"><span class="section-number-4">5.3.3.</span> import custom css</h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
Default html export engine already has us covered with basic css, you can
enable/disable it like so:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">:html-head-include-default-style t/nil
</pre>
</div>

<p>
But you might want to change the default css. Best bet is to do something like
this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">:html-head "&lt;link rel=\"stylesheet\" href=\"../static/style.css\" type=\"text/css\"/&gt;"
</pre>
</div>

<p>
Basically whatever you put in <code>style.css</code> now will end up in every html page of
yours. We can add any information you like there. But for now I am concerned
about css and favicon. This will link to my own style.css file, but you can
also use CDN's or bootstrap or whatever else.
</p>

<p>
Use your own config from another website/blog for example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">:html-head-extra "&lt;link rel=\"stylesheet\" href=\"https://arvydas.dev/static/style.css\" type=\"text/css\"/&gt;"
</pre>
</div>
</div>
</div>

<div id="outline-container-org88f714b" class="outline-4">
<h4 id="org88f714b"><span class="section-number-4">5.3.4.</span> org-html-themes</h4>
<div class="outline-text-4" id="text-5-3-4">
<p>
ORRR last thing that you can try when it comes to styling your website, try
using one of these, <a href="https://github.com/fniessen/org-html-themes">org-html-themes</a>.
</p>

<p>
You can point to one of these themes like such, by placing this code at the top
of your.org file:
</p>
<div class="org-src-container">
<pre class="src src-org">#+SETUPFILE: https://fniessen.github.io/org-html-themes/org/theme-NAME.setup
</pre>
</div>

<p>
Or if you have downloaded the code(more future proof solution), add such line
at the top of your .org file.
</p>
<div class="org-src-container">
<pre class="src src-org">#+SETUPFILE: PATH/TO/GIT/REPO/org/theme-NAME-local.setup
</pre>
</div>

<p>
Of course we can also modify our <code>setq org-static-blog-page-header</code> to contain
the <code>org-html-themes</code>, but I won't do that this time since I know I will be
using my own custom stylesheet.
</p>
</div>
</div>

<div id="outline-container-org9dd22e9" class="outline-4">
<h4 id="org9dd22e9"><span class="section-number-4">5.3.5.</span> Note to self</h4>
<div class="outline-text-4" id="text-5-3-5">
<p>
Some css examples here(built with ox-publish though) -
<a href="https://github.com/arvydasg/emacs_blog/blob/master/css/style.css">https://github.com/arvydasg/emacs_blog/blob/master/css/style.css</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgd86992e" class="outline-3">
<h3 id="orgd86992e"><span class="section-number-3">5.4.</span> Javascript support in HTML export</h3>
<div class="outline-text-3" id="text-5-4">
<p>
Official docs - <a href="https://orgmode.org/manual/JavaScript-support.html">https://orgmode.org/manual/JavaScript-support.html</a>
</p>

<p>
Add the .js files the same way as you would add .css file.
</p>
</div>
</div>

<div id="outline-container-orgc58872b" class="outline-3">
<h3 id="orgc58872b"><span class="section-number-3">5.5.</span> Images in HTML export</h3>
<div class="outline-text-3" id="text-5-5">
</div>
<div id="outline-container-org5d44454" class="outline-4">
<h4 id="org5d44454"><span class="section-number-4">5.5.1.</span> Display images</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
NOTE: gif's are not rendered in github pages for some reason (julijaconsulting
and facebook project gif's)
</p>

<p>
Official docs - <a href="https://orgmode.org/manual/Images-in-HTML-export.html">https://orgmode.org/manual/Images-in-HTML-export.html</a>
My docs - <a href="20231126T003746--images-in-org-files__emacs.html">images in org files</a>
</p>
</div>
</div>

<div id="outline-container-orgaffb423" class="outline-4">
<h4 id="orgaffb423"><span class="section-number-4">5.5.2.</span> One option is to add images as plain html</h4>
<div class="outline-text-4" id="text-5-5-2">
<p>
But then you can not change the size of it in lightbox.
</p>

<figure>
  <img src="./media/Screenshot 2023-11-17 163344 - very quaint.png" alt="1.png" width="300px">
</figure>
</div>
</div>

<div id="outline-container-orgfb66bbb" class="outline-4">
<h4 id="orgfb66bbb"><span class="section-number-4">5.5.3.</span> Another option is to include a link to a file(the usual way)</h4>
<div class="outline-text-4" id="text-5-5-3">
<p>
To toggle the images(show/hide), use <code>org-toggle-inline-images</code>.
</p>


<figure id="org9a3884c">
<img src="./media/water.jpg" alt="water.jpg" width="1200px">

</figure>

<p>
Okay, so no now we know that we can create a yasnippet for this(I have mine
bound to <code>img</code>) and then I can drop images wherever.
</p>
</div>
</div>

<div id="outline-container-orgdf00c11" class="outline-4">
<h4 id="orgdf00c11"><span class="section-number-4">5.5.4.</span> Org download package for inserting images in org files</h4>
<div class="outline-text-4" id="text-5-5-4">
<p>
Optional, does not really work if in WSL - <a href="20231219T090909--using-org-download-package-in-wsl__emacs_windows_wsl.html">using org download package in WSL</a>
</p>
</div>
</div>

<div id="outline-container-org8af2e20" class="outline-4">
<h4 id="org8af2e20"><span class="section-number-4">5.5.5.</span> Add a lightbox effect on the images</h4>
<div class="outline-text-4" id="text-5-5-5">
<p>
Follow - <a href="20231219T091704--add-a-lightbox-effect-for-images-in-html__javascript_websites.html">add a lightbox effect for images in html</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org6d3b4bf" class="outline-3">
<h3 id="org6d3b4bf"><span class="section-number-3">5.6.</span> Preamble(nav) and postamble(footer)</h3>
<div class="outline-text-3" id="text-5-6">
<p>
Docs about them -  <a href="https://orgmode.org/manual/HTML-preamble-and-postamble.html">https://orgmode.org/manual/HTML-preamble-and-postamble.html</a>
</p>

<p>
Postamble - <a href="https://taingram.org/blog/org-mode-blog.html">https://taingram.org/blog/org-mode-blog.html</a>
Postamble - nice footer and more? -
<a href="https://ict4g.net/adolfo/notes/emacs/linking-my-html-pages-to-source-code.html">https://ict4g.net/adolfo/notes/emacs/linking-my-html-pages-to-source-code.html</a>
</p>

<p>
Check other <a href="20231214T150411--inspirational-websites__emacs_websites.html">inspirational websites</a> that are build with Emacs for some
inspiration.
</p>

<p>
Then simply modify - :html-preamble and :html-postamble in your config.
</p>
</div>
</div>

<div id="outline-container-org6a1be9c" class="outline-3">
<h3 id="org6a1be9c"><span class="section-number-3">5.7.</span> Extra's</h3>
<div class="outline-text-3" id="text-5-7">
<p>
Extra tips:
</p>
</div>

<div id="outline-container-org65ea5c3" class="outline-4">
<h4 id="org65ea5c3"><span class="section-number-4">5.7.1.</span> You can also include other content from other files!</h4>
<div class="outline-text-4" id="text-5-7-1">
<p>
Like such - <a href="https://orgmode.org/manual/Include-Files.html">https://orgmode.org/manual/Include-Files.html</a>
</p>

<p>
I have done this to include recent posts into index.org page.
</p>
</div>
</div>

<div id="outline-container-org866c5ae" class="outline-4">
<h4 id="org866c5ae"><span class="section-number-4">5.7.2.</span> Creating a HTML page with my .emacs configuration</h4>
<div class="outline-text-4" id="text-5-7-2">
<p>
Simply made a symlink to my .org configuration file and it renders it together
with the rest of the .org files.
</p>

<div class="org-src-container">
<pre class="src src-bash">[nixos@nixos:~/GIT/devnotes/build]$ ln -s ../../dotfiles/.emacs.d/init.org init.org
</pre>
</div>

<p>
UNFORTUNATELY - if you will chose to deploy to github pages, it will not
understand the symlink, the build will fail with such message:
</p>

<blockquote>
<p>
Error: No such file or directory @ rb_check_realpath_internal - /github/workspace/org/init.org
</p>
</blockquote>

<p>
So I ditched this idea of having a symlink to my init.org. IF I will ever host
this site on another platform - I might try this workaround again.
</p>
</div>
</div>

<div id="outline-container-org74c1dee" class="outline-4">
<h4 id="org74c1dee"><span class="section-number-4">5.7.3.</span> Adding a date to post title in sitemap</h4>
<div class="outline-text-4" id="text-5-7-3">
<p>
Inspiration here - <a href="https://taingram.org/blog/org-mode-blog.html">https://taingram.org/blog/org-mode-blog.html</a>
</p>

<p>
We can customize the entry format with a <code>sitemap-format-entry</code> function. In my
case I wanted to show the date inline with the blog post listings:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(defun ag/org-sitemap-date-entry-format (entry style project)
  "Format ENTRY in org-publish PROJECT Sitemap format ENTRY ENTRY STYLE format that includes date."
  (let ((filename (org-publish-find-title entry project)))
    (if (= (length filename) 0)
        (format "*%s*" entry)
      (format "{{{timestamp(%s)}}} [[file:%s][%s]]"
              (format-time-string "%Y-%m-%d"
                                  (org-publish-find-date entry project))
              entry
              filename))))
</pre>
</div>

<p>
Notice above we insert an <a href="https://orgmode.org/manual/Macro-Replacement.html">Org macro</a> called timestamp, it is defined as follows:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-export-global-macros
      '(("timestamp" . "@@html:&lt;span class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@")))
</pre>
</div>

<p>
We then also must inform <code>org-static-project-alist</code> about this change by using
our custom function in:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">:sitemap-format-entry ag/org-sitemap-date-entry-format
</pre>
</div>

<p>
Re-render your .org files.
</p>

<p>
This macro adds some HTML around the timestamp for CSS styling, it has to be
done as a macro as otherwise Org escapes the HTML tags. The results are:
</p>

<ul class="org-ul">
<li><span class="timestamp">[2024-05-29]</span> <a href="20240125T162939--django-commands__django.html">20240125T162939&#x2013;django-commands__django</a></li>
<li><span class="timestamp">[2024-05-29]</span> <a href="20240529T090313--capitalize-each-blog-post-title-with-elisp__denote_elisp_emacs.html">Capitalize each blog post title with elisp</a></li>
<li><span class="timestamp">[2024-05-29]</span> <a href="20240529T090108--attempt-to-modify-denote-links-to-suite-ox-publish__denote_elisp_emacs.html">attempt to modify denote links to suite ox-publish</a></li>
</ul>
</div>
</div>

<div id="outline-container-org6339108" class="outline-4">
<h4 id="org6339108"><span class="section-number-4">5.7.4.</span> <span class="todo TODO">TODO</span> Linking HTML pages and their org mode sources</h4>
<div class="outline-text-4" id="text-5-7-4">
<p>
Inspiration - <a href="https://ict4g.net/adolfo/notes/emacs/linking-my-html-pages-to-source-code.html">https://ict4g.net/adolfo/notes/emacs/linking-my-html-pages-to-source-code.html</a>
</p>
</div>
</div>

<div id="outline-container-org1cfc137" class="outline-4">
<h4 id="org1cfc137"><span class="section-number-4">5.7.5.</span> Add scroll to top button</h4>
<div class="outline-text-4" id="text-5-7-5">
<p>
Follow - <a href="20231219T172622--scroll-to-top-button__javascript_websites.html">scroll to top button</a>
</p>
</div>
</div>

<div id="outline-container-org950ec66" class="outline-4">
<h4 id="org950ec66"><span class="section-number-4">5.7.6.</span> <span class="todo TODO">TODO</span> Adding analytics</h4>
<div class="outline-text-4" id="text-5-7-6">
</div>
<ol class="org-ol">
<li><a id="orga9f63ee"></a>Plausible<br>
<div class="outline-text-5" id="text-5-7-6-1">
<p>
Follow - <a href="20231219T153629--add-website-analytics-with-plausible__websites.html">add website analytics with plausible</a>
</p>
</div>
</li>

<li><a id="org397ad29"></a>Google tag analytics<br>
<div class="outline-text-5" id="text-5-7-6-2">
<p>
Follow - <a href="20231219T153712--add-website-analytics-with-google-tag-manager__websites.html">add website analytics with google tag manager</a>
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgb35b294" class="outline-4">
<h4 id="orgb35b294"><span class="section-number-4">5.7.7.</span> Table of contents at the side - inspiration</h4>
<div class="outline-text-4" id="text-5-7-7">
<p>
<a href="https://ckeditor.com/docs/ckeditor4/latest/features/codesnippet.html#hooking-a-custom-syntax-highlighter">https://ckeditor.com/docs/ckeditor4/latest/features/codesnippet.html#hooking-a-custom-syntax-highlighter</a>
</p>
</div>
</div>

<div id="outline-container-org3e92c3e" class="outline-4">
<h4 id="org3e92c3e"><span class="section-number-4">5.7.8.</span> short and clean links like here</h4>
<div class="outline-text-4" id="text-5-7-8">
<p>
<a href="https://diego.codes/post/blogging-with-org/">https://diego.codes/post/blogging-with-org/</a>
</p>
</div>
</div>

<div id="outline-container-org3448d20" class="outline-4">
<h4 id="org3448d20"><span class="section-number-4">5.7.9.</span> Print out proper underscore</h4>
<div class="outline-text-4" id="text-5-7-9">
<p>
add #+OPTIONS: ^:nil to all files
</p>

<p>
and write a post about it how it looks wiht and without
</p>

<p>
<a href="https://emacs.stackexchange.com/questions/10549/org-mode-how-to-export-underscore-as-underscore-instead-of-highlight-in-html">https://emacs.stackexchange.com/questions/10549/org-mode-how-to-export-underscore-as-underscore-instead-of-highlight-in-html</a>
</p>
</div>
</div>
<div id="outline-container-org57af1fd" class="outline-4">
<h4 id="org57af1fd"><span class="section-number-4">5.7.10.</span> Tables in HTML export</h4>
<div class="outline-text-4" id="text-5-7-10">
<p>
<a href="https://orgmode.org/manual/Tables-in-HTML-export.html">https://orgmode.org/manual/Tables-in-HTML-export.html</a>
</p>
</div>
</div>
<div id="outline-container-org111f1b0" class="outline-4">
<h4 id="org111f1b0"><span class="section-number-4">5.7.11.</span> Create editable text areas</h4>
<div class="outline-text-4" id="text-5-7-11">
<p>
Docs - <a href="https://orgmode.org/manual/Text-areas-in-HTML-export.html">https://orgmode.org/manual/Text-areas-in-HTML-export.html</a>
</p>

<p>
If you ever want to try using this feature, here is an example:
</p>

<p>
<textarea cols="40" rows="3">
(defun org-xor (a b)
   "Exclusive or."
   (if a (not b) b))</textarea>
</p>
</div>
</div>

<div id="outline-container-orge4cebfc" class="outline-4">
<h4 id="orge4cebfc"><span class="section-number-4">5.7.12.</span> Tags solution</h4>
<div class="outline-text-4" id="text-5-7-12">
</div>
<ol class="org-ol">
<li><a id="org2231136"></a>tags in the sidebar with JS<br>
<div class="outline-text-5" id="text-5-7-12-1">
<p>
<a href="https://manateelazycat.github.io/tags.html">https://manateelazycat.github.io/tags.html</a>
</p>

<p>
solution:
</p>

<p>
<a href="https://github.com/bastibe/org-static-blog/issues/125">https://github.com/bastibe/org-static-blog/issues/125</a>
</p>

<p>
use some js? Mobile content atrodo labai nice taip pat.
</p>
</div>
</li>

<li><a id="org16379ba"></a>create this functionality<br>
<div class="outline-text-5" id="text-5-7-12-2">
<p>
build a tagging functionality like in org static blog(inspiration from it's
source code)
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgc42a46f" class="outline-4">
<h4 id="orgc42a46f"><span class="section-number-4">5.7.13.</span> presentation mode?</h4>
<div class="outline-text-4" id="text-5-7-13">
<p>
<a href="https://orgmode.org/worg/code/org-info-js/index.html#undefined">https://orgmode.org/worg/code/org-info-js/index.html#undefined</a>
</p>

<p>
this guy uses it -
<a href="https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html">https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html</a>
</p>

<p>
"As I use org-info.js and track Worg git, I use "inherit-org-info-js" in all my
org projects:"
</p>
</div>
</div>

<div id="outline-container-orgd38dc16" class="outline-4">
<h4 id="orgd38dc16"><span class="section-number-4">5.7.14.</span> search function with agolia like Bozhidar</h4>
<div class="outline-text-4" id="text-5-7-14">
<p>
<a href="https://docs.projectile.mx/projectile/installation.html">https://docs.projectile.mx/projectile/installation.html</a>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/>
	 <footer>
	 <div class="copyright-container">
	 <div class="copyright">
	 Copyright &copy; 2023-2024 Arvydas Gasparavicius
	 </div>
	 </div>
	 <p class="date">This org file is <u>exported</u> to HTML: 2024-05-29 Wed 10:35</p>
	 <p class="date">This org file is last <u>modified</u>: 2024-05-29 Wed 10:21</p>
	 <p class="date">This org file is <u>created</u>: 2023-12-15 Fri 18:25</p>
	 <div class="generated">
	Created with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.6.15) on <a href="https://www.gnu.org">GNU</a>/<a href="https://www.kernel.org/">Linux</a>
	</div>
	</footer>
	 <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
	 <script src="./static/js/generic.js"></script>
	 <script src="./static/js/scroll-to-top.js"></script>
	 <script src="./static/js/lightbox.js"></script>
	 <script src="./static/js/test.js"></script>
</div>
</body>
</html>
