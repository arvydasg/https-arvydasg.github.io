<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-01-15 Mon 22:29 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>linux commands</title>
<meta name="author" content="Arvydas Gasparavicius" />
<meta name="description" content="welcome to my site" />
<meta name="keywords" content="emacs antanas geles" />
<meta name="generator" content="Org Mode" />

<link rel="stylesheet" href="./static/css/org-html-style-default.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/generic.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/taingram.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/lightbox.css" type="text/css"/>
<link rel="stylesheet" href="./static/css/scroll-to-top.css" type="text/css"/>
<link rel="icon" href="./static/ag.ico">
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="sitemap.html">NOTES </a>
 
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="preamble" class="status">
<div id="updated">Updated: 2024-01-11 Thu 21:22</div>
</div>
<div id="content" class="content">
<header>
<h1 class="title">linux commands</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org827dffd">1. Secret management</a></li>
<li><a href="#org6860eef">2. LDAP</a></li>
<li><a href="#org2ea9589">3. Access management</a></li>
<li><a href="#org5fe2ef1">4. Server information</a></li>
<li><a href="#org357cbad">5. Search</a></li>
<li><a href="#org1ce03b4">6. File</a></li>
<li><a href="#org9bca2ed">7. Processes</a>
<ul>
<li><a href="#org0a1fac7">7.1. htop</a></li>
</ul>
</li>
<li><a href="#org96a3b28">8. Network</a></li>
<li><a href="#org8c3f417">9. Logs</a></li>
<li><a href="#org9baead3">10. Yum</a></li>
<li><a href="#org6c7c401">11. zip</a></li>
<li><a href="#org53a77a8">12. NAS</a></li>
<li><a href="#orgd3cf151">13. odbc</a></li>
<li><a href="#org2e91044">14. Credentials</a></li>
</ul>
</div>
</nav>

<div id="outline-container-org827dffd" class="outline-2">
<h2 id="org827dffd"><span class="section-number-2">1.</span> Secret management</h2>
<div class="outline-text-2" id="text-1">
<p>
read -s LDAP_USER
read -s LDAP_PASSWORD
read -s LDAP_SERVER
</p>

<p>
echo "LDAP_USER: $LDAP_USER"
echo "LDAP_PASSWORD: $LDAP_PASSWORD"
echo "LDAP_SERVER: $LDAP_SERVER"
</p>
</div>
</div>

<div id="outline-container-org6860eef" class="outline-2">
<h2 id="org6860eef"><span class="section-number-2">2.</span> LDAP</h2>
<div class="outline-text-2" id="text-2">
<p>
getent
</p>

<p>
getent group group_name
</p>

<p>
getent group yg-nas-quant-z | grep "s4X9Xf"
</p>

<p>
id username
</p>

<p>
groups username
</p>

<p>
getent netgroup LSP7077A | grep -E "S2XXF|S30XX|s7XXc|s8XXf"
</p>

<p>
getent netgroup servername | grep username
</p>
</div>
</div>

<div id="outline-container-org2ea9589" class="outline-2">
<h2 id="org2ea9589"><span class="section-number-2">3.</span> Access management</h2>
<div class="outline-text-2" id="text-3">
<p>
last
</p>

<p>
lastb username
</p>

<p>
w
</p>

<p>
cat /etc/sudoers
</p>

<p>
visudo
</p>

<p>
chown
chmod
</p>

<p>
setfacl -Rm g:quant:rwX -m d:g:quant:rwX -m m:rwx /[directory of choice]
</p>
</div>
</div>

<div id="outline-container-org5fe2ef1" class="outline-2">
<h2 id="org5fe2ef1"><span class="section-number-2">4.</span> Server information</h2>
<div class="outline-text-2" id="text-4">
<p>
dmesgn
</p>

<p>
uptime
</p>

<p>
free -g -h -t
</p>

<p>
cat /proc/meminfo
</p>

<p>
cat /proc/meminfo | grep -E 'MemTotal|MemFree|MemAvailable|Buffers|Cached' | awk '{print $1 ": " $2/1024/1024 " GB"}'
</p>

<p>
lscpu
</p>

<p>
rpm -qa -last | more
</p>
</div>
</div>

<div id="outline-container-org357cbad" class="outline-2">
<h2 id="org357cbad"><span class="section-number-2">5.</span> Search</h2>
<div class="outline-text-2" id="text-5">
<p>
grep -r "mas" .
</p>

<p>
find / -type f -name "viya-services-status.yml" 2&gt;/dev/null
</p>
</div>
</div>

<div id="outline-container-org1ce03b4" class="outline-2">
<h2 id="org1ce03b4"><span class="section-number-2">6.</span> File</h2>
<div class="outline-text-2" id="text-6">
<p>
ln -s /opt/app/html html
</p>

<p>
du -sh /opt/app/*
</p>

<p>
df -h
</p>

<p>
du
</p>

<p>
du -sh filename/foldername
</p>

<p>
stat filename.txt
</p>

<p>
du -skh *
</p>

<p>
sudo lsof +L1
</p>

<p>
rm -rri /opt/app/R/*
</p>

<p>
find retail_modelling -type d &gt; test_output.txt
</p>

<p>
ls -la | wc -l
</p>

<p>
stat /opt/app/retail_modelling/users/s5743b/fi_kort_rc_ttc.tsv
</p>

<p>
du -h /home | sort -rh | head -n 10
</p>
</div>
</div>

<div id="outline-container-org9bca2ed" class="outline-2">
<h2 id="org9bca2ed"><span class="section-number-2">7.</span> Processes</h2>
<div class="outline-text-2" id="text-7">
<p>
fuser -c <i>opt/app</i>
</p>

<p>
ps -ef | grep 2666631
</p>

<p>
ps -ef | grep rstudio
</p>

<p>
ps aux | grep -i rstudio
</p>

<p>
ps aux | grep -i jupyter
</p>

<p>
kill -9 &lt;processname form the previous command&gt;
</p>

<p>
ps - show running processes
</p>

<p>
ps aux | grep SXXXB | grep rstudio
</p>

<p>
pkill -u sxxxxxf - NEVEIKIA
killall -u sxxxxxf rsession - NEVEIKIA
pkill -9 -u sxxxxxf rsession - SUVEIKE
</p>

<p>
kill all rstudio sessions
sudo killall -9 rserver
</p>

<p>
Check if any services remaining
pgrep rserver
</p>

<p>
systemctl list-units &#x2013;type=service | grep sas-viya
ps aux | grep sas-viya
</p>

<p>
sudo systemctl stop sas-viya-*
</p>
</div>

<div id="outline-container-org0a1fac7" class="outline-3">
<h3 id="org0a1fac7"><span class="section-number-3">7.1.</span> htop</h3>
<div class="outline-text-3" id="text-7-1">
<p>
shortcuts - <a href="https://spin.atomicobject.com/2020/02/10/htop-guide/">https://spin.atomicobject.com/2020/02/10/htop-guide/</a>
</p>

<p>
<code>VIRT</code> stands for "Virtual Memory." It represents the total virtual
memory used by a process. Virtual memory includes both physical RAM
and swap space on disk.
</p>

<p>
<code>RES</code> stands for "Resident Set Size." It represents the portion of a
process's virtual memory that is currently held in physical RAM. In
other words, it shows how much actual physical memory a process is
using.
</p>

<p>
<code>SHR</code> stands for "Shared Memory." It represents the portion of the RES
(resident set size) that is shared among multiple processes. This can
be a space-saving feature because shared libraries and code can be
loaded into memory once and used by multiple processes.
</p>
</div>
</div>
</div>

<div id="outline-container-org96a3b28" class="outline-2">
<h2 id="org96a3b28"><span class="section-number-2">8.</span> Network</h2>
<div class="outline-text-2" id="text-8">
<p>
route
</p>

<p>
nslookup &lt;IP address or hostname&gt;
</p>

<p>
dig -x &lt;IP address&gt;
</p>

<p>
netstat -tlnp
</p>

<p>
netstat -tuln | grep :80
</p>

<p>
nmap -T4 -Pn -p 1-65535 lxxx123a
</p>

<p>
telnet servername 8301
telnet serername.ad1.net 1433
</p>


<p>
Labas, cia reiktu pasigilinti i konkreciu serveriu internal firewall nustatymus
ir esant poreikiui juos persikonfiguruoti. Panasu, kad dauguma portu ant pvz:
xxxx1, xxxx2 serveriu yra isjungti/uzblokuoti. Is networko puses mes galima
pagelbet su firewallu taisyklem (srautai tarp skirtingu environmentu,
potinkliu), bet vidiniu serveriu portu nustatymu nepriziurim. Jei reikalinga
turet connectiona abi sitos vietos turi buti atidarytos (serveris klauso x
portu ) + turi buti taisykle firewalle, jei kazkas is 'tolimo' tinklo nori
connectintis i serveri tuo x portu.
</p>

<p>
skirtingi rulsetai ir praleidimai galioja skirtingiems environmentams ir
enclave'ams, del to prode ir appvery esantys serveriai nebutinai tures tas
pacias taisykles.
</p>
</div>
</div>

<div id="outline-container-org8c3f417" class="outline-2">
<h2 id="org8c3f417"><span class="section-number-2">9.</span> Logs</h2>
<div class="outline-text-2" id="text-9">
<p>
journalctl -u jupyterhub -f
</p>

<p>
journalctl -u rstudio-server.service -f
</p>

<p>
logs to file
</p>
<div class="org-src-container">
<pre class="src src-bash">ansible-playbook viya-ark-master/playbooks/viya-mmsu/viya-services-status.yml -vvv 2&gt;&amp;1 | tee -a viya_services_status_logs_20230727.txt
ansible-playbook viya-ark-master/playbooks/viya-mmsu/viya-services-stop.yml -e "enable_stray_cleanup=true" -vvv 2&gt;&amp;1 | tee -a viya_services_stop_logs_20230727.txt
ansible-playbook viya-ark-master/playbooks/viya-mmsu/viya-services-start.yml -vvv 2&gt;&amp;1 | tee -a viya_services_start_logs_20230727.txt

# sas installation logs to file

ansible-playbook site.yml -vvv 2&gt;&amp;1 | tee -a install_20230809_1500.txt
</pre>
</div>
</div>
</div>

<div id="outline-container-org9baead3" class="outline-2">
<h2 id="org9baead3"><span class="section-number-2">10.</span> Yum</h2>
<div class="outline-text-2" id="text-10">
<p>
rpm official repo(yum, RHEL) commands - <a href="https://www.rpmfind.net/linux/RPM/ByName.html">https://www.rpmfind.net/linux/RPM/ByName.html</a>
</p>

<p>
yum whatprovides */ldapsearch
</p>

<p>
repoquery -lq openldap-clients
</p>

<p>
yum install openldap-clients
</p>

<p>
yum history
yum list installed | grep devel
yum remove &lt;reponame&gt;
yum erase &lt;reponame&gt;
yum repolist all
yum repolist enabled
yum search 'udunit*' &#x2013;enablerepo=hello_Extra_Packages_for_Enterprise_Linux_epel8
yum search 'R-<b>' &#x2013;disablerepo='</b>' &#x2013;enablerepo=hello_Extra_Packages_for_Enterprise_Linux_epel8
yum info 'R-devel' &#x2013;disablerepo='*' &#x2013;enablerepo=hello_Extra_Packages_for_Enterprise_Linux_epel8
sudo yum install 'udunits2-devel' &#x2013;enablerepo=hello_Extra_Packages_for_Enterprise_Linux_epel8 &#x2013;enablerepo=codeready-builder-for-rhel-8-x86_64-rpms
</p>

<p>
yum repolist all
</p>

<p>
yum search 'R-<b>' &#x2013;disablerepo='</b>' &#x2013;enablerepo=hello_Extra_Packages_for_Enterprise_Linux_epel8
</p>

<p>
yum info 'R-devel' &#x2013;disablerepo='*' &#x2013;enablerepo=hello_Extra_Packages_for_Enterprise_Linux_epel8
</p>

<p>
sudo yum install 'R-devel' &#x2013;enablerepo=hello_Extra_Packages_for_Enterprise_Linux_epel8 &#x2013;enablerepo=codeready-builder-for-rhel-8-x86_64-rpms
</p>
</div>
</div>

<div id="outline-container-org6c7c401" class="outline-2">
<h2 id="org6c7c401"><span class="section-number-2">11.</span> zip</h2>
<div class="outline-text-2" id="text-11">
<p>
tar -cvf archive_name.tar files_or_directories_to_archive
tar -cvf labas.tar .
</p>
</div>
</div>

<div id="outline-container-org53a77a8" class="outline-2">
<h2 id="org53a77a8"><span class="section-number-2">12.</span> NAS</h2>
<div class="outline-text-2" id="text-12">
<p>
cat /etc/fstab
</p>

<p>
mount -l |grep sas-store
</p>
</div>
</div>

<div id="outline-container-orgd3cf151" class="outline-2">
<h2 id="orgd3cf151"><span class="section-number-2">13.</span> odbc</h2>
<div class="outline-text-2" id="text-13">
<p>
ODBC
</p>

<p>
For setting up ODBC connection you need temp root user. Add temp root
user - Model Validation Home - SEB Confluence (sebank.se)
</p>

<p>
NOTE. You can determine the location of the configuration files on
your system by entering the following command into a terminal:
"odbcinst -j".
</p>

<p>
Check what ODBC drivers are installed for required DB in
"/etc/odbcinst.ini" (or use command "odbcinst -q -d").
</p>

<p>
After you have your file you need to create global variable to point
to that file location for ODBC to pic up needed information. "export
ODBCINI=/etc/odbc.ini" (only for the first time).
</p>

<p>
You can list the data sources on your system with the following
command: "odbcinst -q -s"
</p>
</div>
</div>

<div id="outline-container-org2e91044" class="outline-2">
<h2 id="org2e91044"><span class="section-number-2">14.</span> Credentials</h2>
<div class="outline-text-2" id="text-14">
<p>
Temporarily store a password into environment variable, just to not have my
password in <code>.bash_history</code>:
</p>

<div class="org-src-container">
<pre class="src src-bash">read -s PASSWORD
echo $PASSWORD
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/>
	 <footer>
	 <div class="copyright-container">
	 <div class="copyright">
	 Copyright &copy; 2023-2023 Arvydas Gasparavicius
	 </div>
	 </div>
	 <p class="date">This org file is <u>exported</u> to HTML: 2024-01-15 Mon 22:29</p>
	 <p class="date">This org file is last <u>modified</u>: 2024-01-11 Thu 21:22</p>
	 <p class="date">This org file is <u>created</u>: 2023-12-20 Wed 12:54</p>
	 <div class="generated">
	Created with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.1 (<a href="https://orgmode.org">Org</a> mode 9.6.6) on <a href="https://www.gnu.org">GNU</a>/<a href="https://www.kernel.org/">Linux</a>
	</div>
	</footer>
	 <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
	 <script src="./static/js/generic.js"></script>
	 <script src="./static/js/scroll-to-top.js"></script>
	 <script src="./static/js/lightbox.js"></script>
	 <script src="./static/js/test.js"></script>
</div>
</body>
</html>